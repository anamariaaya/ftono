{"version":3,"sources":["base/funciones.js"],"names":["er","num","container","async","readLang","resultado","fetch","json","error","console","log","readJSON","imprimirAlerta","message","type","sibling","divMensaje","document","createElement","classList","add","querySelector","remove","lang","alerts","textContent","insertBefore","setTimeout","validarFormulario","e","form","target","parentElement","value","length","test","llenarDatos","inputs","querySelectorAll","arrayInputs","Array","from","datos","forEach","input","id","limpiarHTML","element","firstChild","removeChild","crearAlerta","accion","alertaContenedor","alertaDiv","alertaIcono","alertaTitulo","alertaParrafo","alertaBotones","alertaBotonCancelar","onclick","cerrarAlerta","alertaBotonEliminar","setAttribute","alertaInput","alertaInputSubmit","appendChild","alerta"],"mappings":"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","file":"funciones.js","sourcesContent":["import {er, num} from '../admin/selectores.js';\r\nimport {container} from '../filmtono/selectores.js';\r\n\r\nexport async function readLang(){\r\n    try{\r\n        const resultado = await fetch('http://localhost:3000/api/filmtono/lenguaje');\r\n        const data = await resultado.json();\r\n        return data;\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\n\r\n//Leer el lang.json\r\nexport async function readJSON(){\r\n    try{\r\n        const resultado = await fetch('http://localhost:3000/api/filmtono/alerts');\r\n        const data = await resultado.json();\r\n        return data;\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nexport async function imprimirAlerta(message, type, container, sibling) {\r\n    // Crea el div\r\n    const divMensaje = document.createElement('div');\r\n    \r\n    // Si es de tipo error agrega una clase\r\n    if(type === 'error') {\r\n         divMensaje.classList.add('alerta__error');\r\n    } else {\r\n         divMensaje.classList.add('alerta__exito');\r\n    }\r\n\r\n    const error = document.querySelector('.alerta__error');\r\n    if(error){\r\n        error.remove();\r\n    }\r\n\r\n    const lang = await readLang();\r\n    const alerts = await readJSON();\r\n    divMensaje.textContent = alerts[message][lang];\r\n\r\n    //divMensaje.textContent = message;\r\n\r\n    // Insertar en el DOM\r\n    container.insertBefore(divMensaje, sibling);\r\n\r\n    // Quitar el alert despues de 3 segundos\r\n    setTimeout( () => {\r\n        divMensaje.remove();\r\n    }, 5000);\r\n}\r\n\r\nexport function validarFormulario(e) {\r\n    const form = e.target.parentElement;\r\n\r\n    if(e.target.value.length > 0){\r\n        //Elimina los errores\r\n        const error = document.querySelector('.alerta__error');\r\n        if(error){\r\n            error.remove();\r\n        }\r\n       \r\n    } else {\r\n        //console.log('No hay nada');\r\n        imprimirAlerta('input', 'error', form, e.target);\r\n    }\r\n\r\n    if(e.target.type === 'email'){\r\n        if(er.test(e.target.value) === false){\r\n            imprimirAlerta('email', 'error', form, e.target);\r\n        } \r\n    }\r\n\r\n    //verificar que se alla elegido una opción de un select\r\n    if(e.target.type === 'select-one'){\r\n        if(e.target.value === '0' || e.target.value === ''){\r\n            imprimirAlerta('select', 'error', form, e.target);\r\n        }\r\n    }\r\n\r\n    if(e.target.type === 'tel'){\r\n        if(num.test(e.target.value) === false || e.target.value.length < 9){\r\n            imprimirAlerta('phone', 'error', form, e.target);\r\n        } \r\n    }\r\n\r\n    //construir un array con algunos inputs que traemos del formulario\r\n    \r\n\r\n    // const inputs = [cargo, telContacto, empresa, idFiscal, pais, direccion, terms, privacy];\r\n\r\n    // //comprobar que todos los inputs tengan un valor\r\n    // const arrayInputs = Array.from(inputs);\r\n    // console.log(arrayInputs);\r\n    // if(arrayInputs.every( input => input.value !== '')){\r\n    //     llenarDatos();\r\n    // }\r\n}\r\n\r\nexport function llenarDatos() {\r\n    const inputs = document.querySelectorAll('.form input');\r\n    const arrayInputs = Array.from(inputs);\r\n    const datos = {};\r\n    arrayInputs.forEach( input => {\r\n        datos[input.id] = input.value;\r\n    });\r\n    return datos;\r\n}\r\n\r\nexport function limpiarHTML(element){\r\n    while(element.firstChild) {\r\n        element.removeChild(element.firstChild);\r\n    }\r\n}\r\n\r\nexport function crearAlerta(accion, id){\r\n    const alertaContenedor = document.createElement('div');\r\n    alertaContenedor.classList.add('modal-alerta--activo');\r\n    // alertaContenedor.onclick = cerrarAlerta;\r\n\r\n    const alertaDiv = document.createElement('DIV');\r\n    alertaDiv.classList.add('modal-alerta');\r\n\r\n    const alertaIcono = document.createElement('I');\r\n    alertaIcono.classList.add('fa-solid', 'fa-circle-exclamation', 'modal-alerta__icono');\r\n\r\n    const alertaTitulo = document.createElement('H3');\r\n    alertaTitulo.classList.add('modal-alerta__titulo');\r\n    alertaTitulo.textContent = '¿Estás seguro?';\r\n\r\n    const alertaParrafo = document.createElement('P');\r\n    alertaParrafo.classList.add('modal-alerta__parrafo');\r\n    alertaParrafo.textContent = 'Esta acción no se puede deshacer';\r\n\r\n    const alertaBotones = document.createElement('DIV');\r\n    alertaBotones.classList.add('modal-alerta__botones');\r\n\r\n    const alertaBotonCancelar = document.createElement('BUTTON');\r\n    alertaBotonCancelar.classList.add('modal-alerta__boton', 'modal-alerta__boton--cancelar');\r\n    alertaBotonCancelar.textContent = 'Cancelar';\r\n    alertaBotonCancelar.onclick = cerrarAlerta;\r\n\r\n    const alertaBotonEliminar = document.createElement('FORM');\r\n    alertaBotonEliminar.setAttribute('action', accion);\r\n    alertaBotonEliminar.setAttribute('method', 'POST');\r\n\r\n    const alertaInput = document.createElement('INPUT');\r\n    alertaInput.setAttribute('type', 'hidden');\r\n    alertaInput.setAttribute('name', 'id');\r\n    alertaInput.setAttribute('value', id);\r\n\r\n    const alertaInputSubmit = document.createElement('INPUT');\r\n    alertaInputSubmit.setAttribute('type', 'submit');\r\n    alertaInputSubmit.setAttribute('value', 'Eliminar');\r\n    alertaInputSubmit.classList.add('modal-alerta__boton');\r\n\r\n    alertaBotonEliminar.appendChild(alertaInput);\r\n    alertaBotonEliminar.appendChild(alertaInputSubmit);\r\n\r\n    //Agregar botones al div de botones\r\n    alertaBotones.appendChild(alertaBotonCancelar);\r\n    alertaBotones.appendChild(alertaBotonEliminar);\r\n\r\n    //Agregar elementos en el DIV alerta\r\n    alertaDiv.appendChild(alertaIcono);\r\n    alertaDiv.appendChild(alertaTitulo);\r\n    alertaDiv.appendChild(alertaParrafo);\r\n    alertaDiv.appendChild(alertaBotones);\r\n\r\n    alertaContenedor.appendChild(alertaDiv);\r\n    container.appendChild(alertaContenedor);    \r\n}\r\n\r\nexport function cerrarAlerta(){\r\n    const alerta = document.querySelector('.modal-alerta--activo');\r\n    if(alerta){\r\n        alerta.remove();\r\n    }\r\n}"]}