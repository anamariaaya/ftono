{"version":3,"sources":["base/funciones.js"],"names":["er","num","indicativo","container","body","dashboardContenido","async","readLang","resultado","fetch","window","location","origin","json","error","console","log","readJSON","mode","imprimirAlerta","message","type","sibling","divMensaje","document","createElement","style","gridColumn","classList","add","querySelector","remove","lang","alerts","textContent","insertBefore","setTimeout","validarFormulario","e","form","target","parentElement","value","length","test","llenarDatos","inputs","querySelectorAll","arrayInputs","Array","from","datos","forEach","input","id","limpiarHTML","element","firstChild","removeChild","crearAlerta","accion","alertaContenedor","alertaDiv","alertaIcono","alertaTitulo","alertaParrafo","alertaBotones","alertaBotonCancelar","onclick","cerrarAlerta","alertaBotonEliminar","setAttribute","alertaInput","alertaInputSubmit","appendChild","alerta","loader","button","getElementById","display","addEventListener","eliminarItem","preventDefault","contains","divModal","modal","btnCerrar","innerHTML","cerrarModal","paragraph","btnWrapper","btnEliminar","btnCancelar"],"mappings":"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","file":"funciones.js","sourcesContent":["import {er, num, indicativo} from '../admin/selectores.js';\r\nimport {container} from '../filmtono/selectores.js';\r\nimport {body, dashboardContenido} from './selectores.js';\r\n\r\nexport async function readLang(){\r\n    try{\r\n        const resultado = await fetch(window.location.origin+'/api/filmtono/lenguaje');\r\n        const data = await resultado.json();\r\n        return data;\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\n\r\n//Leer el lang.json\r\nexport async function readJSON(){\r\n    try{\r\n        const resultado = await fetch(window.location.origin+'/api/filmtono/alerts', {mode: 'cors'});\r\n        const data = await resultado.json();\r\n        return data;\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nexport async function imprimirAlerta(message, type, container, sibling) {\r\n    // Crea el div\r\n    const divMensaje = document.createElement('div');\r\n    divMensaje.style.gridColumn = '1 / 3';\r\n    \r\n    // Si es de tipo error agrega una clase\r\n    if(type === 'error') {\r\n         divMensaje.classList.add('alerta__error');\r\n    } else {\r\n         divMensaje.classList.add('alerta__exito');\r\n    }\r\n\r\n    const error = document.querySelector('.alerta__error');\r\n    if(error){\r\n        error.remove();\r\n    }\r\n\r\n    const lang = await readLang();\r\n    const alerts = await readJSON();\r\n    divMensaje.textContent = alerts[message][lang];\r\n\r\n    // Insertar en el DOM\r\n    container.insertBefore(divMensaje, sibling);\r\n\r\n    // Quitar el alert despues de 3 segundos\r\n    setTimeout( () => {\r\n        divMensaje.remove();\r\n    }, 4000);\r\n}\r\n\r\nexport function validarFormulario(e) {\r\n    const form = e.target.parentElement;\r\n\r\n    if(e.target.value.length > 0){\r\n        //Elimina los errores\r\n        const error = document.querySelector('.alerta__error');\r\n        if(error){\r\n            error.remove();\r\n        }\r\n       \r\n    } else {\r\n        imprimirAlerta('input', 'error', form, e.target);\r\n    }\r\n\r\n    if(e.target.type === 'email'){\r\n        if(er.test(e.target.value) === false){\r\n            imprimirAlerta('email', 'error', form, e.target);\r\n        } \r\n    }\r\n\r\n    //verificar que se alla elegido una opción de un select\r\n    if(e.target.type === 'select-one'){\r\n        if(e.target.value === '0' || e.target.value === ''){\r\n            imprimirAlerta('select', 'error', form, e.target);\r\n        }\r\n    }\r\n\r\n    if(e.target.type === 'tel'){\r\n        if(num.test(e.target.value) === false || e.target.value.length < 8){\r\n            imprimirAlerta('phone', 'error', form, e.target);\r\n        } \r\n    }\r\n}\r\n\r\nexport function llenarDatos() {\r\n    const inputs = document.querySelectorAll('.form input');\r\n    const arrayInputs = Array.from(inputs);\r\n    const datos = {};\r\n    arrayInputs.forEach( input => {\r\n        datos[input.id] = input.value;\r\n    });\r\n    return datos;\r\n}\r\n\r\nexport function limpiarHTML(element){\r\n    while(element.firstChild) {\r\n        element.removeChild(element.firstChild);\r\n    }\r\n}\r\n\r\nexport function crearAlerta(accion, id){\r\n    const alertaContenedor = document.createElement('div');\r\n    alertaContenedor.classList.add('modal-alerta--activo');\r\n    // alertaContenedor.onclick = cerrarAlerta;\r\n\r\n    const alertaDiv = document.createElement('DIV');\r\n    alertaDiv.classList.add('modal-alerta');\r\n\r\n    const alertaIcono = document.createElement('I');\r\n    alertaIcono.classList.add('fa-solid', 'fa-circle-exclamation', 'modal-alerta__icono');\r\n\r\n    const alertaTitulo = document.createElement('H3');\r\n    alertaTitulo.classList.add('modal-alerta__titulo');\r\n    alertaTitulo.textContent = '¿Estás seguro?';\r\n\r\n    const alertaParrafo = document.createElement('P');\r\n    alertaParrafo.classList.add('modal-alerta__parrafo');\r\n    alertaParrafo.textContent = 'Esta acción no se puede deshacer';\r\n\r\n    const alertaBotones = document.createElement('DIV');\r\n    alertaBotones.classList.add('modal-alerta__botones');\r\n\r\n    const alertaBotonCancelar = document.createElement('BUTTON');\r\n    alertaBotonCancelar.classList.add('modal-alerta__boton', 'modal-alerta__boton--cancelar');\r\n    alertaBotonCancelar.textContent = 'Cancelar';\r\n    alertaBotonCancelar.onclick = cerrarAlerta;\r\n\r\n    const alertaBotonEliminar = document.createElement('FORM');\r\n    alertaBotonEliminar.setAttribute('action', accion);\r\n    alertaBotonEliminar.setAttribute('method', 'POST');\r\n\r\n    const alertaInput = document.createElement('INPUT');\r\n    alertaInput.setAttribute('type', 'hidden');\r\n    alertaInput.setAttribute('name', 'id');\r\n    alertaInput.setAttribute('value', id);\r\n\r\n    const alertaInputSubmit = document.createElement('INPUT');\r\n    alertaInputSubmit.setAttribute('type', 'submit');\r\n    alertaInputSubmit.setAttribute('value', 'Eliminar');\r\n    alertaInputSubmit.classList.add('modal-alerta__boton');\r\n\r\n    alertaBotonEliminar.appendChild(alertaInput);\r\n    alertaBotonEliminar.appendChild(alertaInputSubmit);\r\n\r\n    //Agregar botones al div de botones\r\n    alertaBotones.appendChild(alertaBotonCancelar);\r\n    alertaBotones.appendChild(alertaBotonEliminar);\r\n\r\n    //Agregar elementos en el DIV alerta\r\n    alertaDiv.appendChild(alertaIcono);\r\n    alertaDiv.appendChild(alertaTitulo);\r\n    alertaDiv.appendChild(alertaParrafo);\r\n    alertaDiv.appendChild(alertaBotones);\r\n\r\n    alertaContenedor.appendChild(alertaDiv);\r\n    container.appendChild(alertaContenedor);    \r\n}\r\n\r\nexport function cerrarAlerta(){\r\n    const alerta = document.querySelector('.modal-alerta--activo');\r\n    if(alerta){\r\n        alerta.remove();\r\n    }\r\n}\r\n\r\nexport function loader(button){\r\n    // Hide the loading screen when the page is fully loaded\r\n    document.getElementById('loadingScreen').style.display = 'none';\r\n\r\n    //Add event listener for the button given to trigger the loader\r\n    button.addEventListener('click', showLoadingScreen);\r\n    \r\n    // Function to show the loading screen\r\n    function showLoadingScreen() {\r\n        document.getElementById('loadingScreen').style.display = 'flex';\r\n    }\r\n}\r\n\r\nexport async function eliminarItem(e){\r\n    e.preventDefault();\r\n    const lang = await readLang();\r\n    const alerts = await readJSON();\r\n    if(e.target.classList.contains('btn-delete')){\r\n        const id = e.target.id;\r\n        dashboardContenido.classList.add('overlay');\r\n\r\n        const divModal = document.createElement('div');\r\n        divModal.classList.add('register');\r\n\r\n        const modal = document.createElement('div');\r\n        modal.classList.add('register__modal');\r\n        console.log('Borrar: '+id);\r\n\r\n        const btnCerrar = document.createElement('button');\r\n        btnCerrar.classList.add('register__btn-cerrar');\r\n        btnCerrar.innerHTML = '<i class=\"fas fa-times\"></i>';\r\n        btnCerrar.onclick = cerrarModal;\r\n\r\n        const paragraph = document.createElement('p');\r\n        paragraph.textContent = alerts['delete_item'][lang];\r\n\r\n        const btnWrapper = document.createElement('div');\r\n        btnWrapper.classList.add('btn__wrapper');\r\n\r\n        const btnEliminar = document.createElement('button');\r\n        btnEliminar.classList.add('btn-delete');\r\n        btnEliminar.textContent = alerts['delete'][lang];\r\n        // btnEliminar.onclick = function(){\r\n        //     const form = document.createElement('form');\r\n        //     form.setAttribute('action', '/api/filmtono/eliminar');\r\n        //     form.setAttribute('method', 'POST');\r\n        //     const input = document.createElement('input');\r\n        //     input.setAttribute('type', 'hidden');\r\n        //     input.setAttribute('name', 'id');\r\n        //     input.setAttribute('value', id);\r\n        //     form.appendChild(input);\r\n        //     body.appendChild(form);\r\n        //     form.submit();\r\n        // }\r\n\r\n        const btnCancelar = document.createElement('button');\r\n        btnCancelar.classList.add('btn-cancel');\r\n        btnCancelar.textContent = alerts['cancel'][lang];\r\n        btnCancelar.onclick = cerrarModal;\r\n\r\n        btnWrapper.appendChild(btnEliminar);\r\n        btnWrapper.appendChild(btnCancelar);\r\n\r\n        modal.appendChild(paragraph);\r\n        modal.appendChild(btnWrapper);\r\n\r\n        divModal.appendChild(modal);\r\n        body.appendChild(divModal);\r\n    }\r\n}\r\nfunction cerrarModal(){\r\n    const modal = document.querySelector('.register');\r\n    dashboardContenido.classList.remove('overlay');\r\n    modal.remove();\r\n}"]}