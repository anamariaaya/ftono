{"version":3,"sources":["base/funciones.js"],"names":["er","num","indicativo","body","dashboardContenido","tabsBtns","tabsContent","tabsDiv","submitBtns","async","readLang","resultado","fetch","window","location","origin","json","error","console","log","readJSON","mode","imprimirAlerta","message","type","container","sibling","divMensaje","document","createElement","style","gridColumn","classList","add","querySelector","remove","lang","alerts","textContent","insertBefore","setTimeout","validarFormulario","e","form","target","parentElement","value","length","test","llenarDatos","inputs","querySelectorAll","arrayInputs","Array","from","datos","forEach","input","id","limpiarHTML","element","firstChild","removeChild","loader","button","getElementById","display","addEventListener","eliminarItem","preventDefault","contains","alertaContenedor","alertaDiv","alertaIcono","alertaTitulo","alertaParrafo","alertaBotones","alertaBotonCancelar","onclick","cerrarAlerta","btnCerrar","innerHTML","btnEliminar","dataset","role","item","undefined","href","appendChild","alerta","changeTabs","i","btn","content","btnSubmitLoader"],"mappings":"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","file":"funciones.js","sourcesContent":["import {er, num, indicativo} from '../music/selectores.js';\r\n\r\nimport {body, dashboardContenido, tabsBtns, tabsContent, tabsDiv, submitBtns} from './selectores.js';\r\n\r\n\r\nexport async function readLang(){\r\n    try{\r\n        const resultado = await fetch(window.location.origin+'/api/filmtono/lenguaje');\r\n        const data = await resultado.json();\r\n        return data;\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\n\r\n//Leer el lang.json\r\nexport async function readJSON(){\r\n    try{\r\n        const resultado = await fetch(window.location.origin+'/api/filmtono/alerts', {mode: 'cors'});\r\n        const data = await resultado.json();\r\n        return data;\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nexport async function imprimirAlerta(message, type, container, sibling) {\r\n    // Crea el div\r\n    const divMensaje = document.createElement('div');\r\n    divMensaje.style.gridColumn = '1 / 3';\r\n    \r\n    // Si es de tipo error agrega una clase\r\n    if(type === 'error') {\r\n         divMensaje.classList.add('alerta__error');\r\n    } else {\r\n         divMensaje.classList.add('alerta__exito');\r\n    }\r\n\r\n    const error = document.querySelector('.alerta__error');\r\n    if(error){\r\n        error.remove();\r\n    }\r\n\r\n    const lang = await readLang();\r\n    const alerts = await readJSON();\r\n    divMensaje.textContent = alerts[message][lang];\r\n\r\n    // Insertar en el DOM\r\n    container.insertBefore(divMensaje, sibling);\r\n\r\n    // Quitar el alert despues de 3 segundos\r\n    setTimeout( () => {\r\n        divMensaje.remove();\r\n    }, 4000);\r\n}\r\n\r\nexport function validarFormulario(e) {\r\n    const form = e.target.parentElement;\r\n\r\n    if(e.target.value.length > 0){\r\n        //Elimina los errores\r\n        const error = document.querySelector('.alerta__error');\r\n        if(error){\r\n            error.remove();\r\n        }\r\n       \r\n    } else {\r\n        imprimirAlerta('input', 'error', form, e.target);\r\n    }\r\n\r\n    if(e.target.type === 'email'){\r\n        if(er.test(e.target.value) === false){\r\n            imprimirAlerta('email', 'error', form, e.target);\r\n        } \r\n    }\r\n\r\n    //verificar que se alla elegido una opci√≥n de un select\r\n    if(e.target.type === 'select-one'){\r\n        if(e.target.value === '0' || e.target.value === ''){\r\n            imprimirAlerta('select', 'error', form, e.target);\r\n        }\r\n    }\r\n\r\n    if(e.target.type === 'tel'){\r\n        if(num.test(e.target.value) === false || e.target.value.length < 8){\r\n            imprimirAlerta('phone', 'error', form, e.target);\r\n        } \r\n    }\r\n}\r\n\r\nexport function llenarDatos() {\r\n    const inputs = document.querySelectorAll('.form input');\r\n    const arrayInputs = Array.from(inputs);\r\n    const datos = {};\r\n    arrayInputs.forEach( input => {\r\n        datos[input.id] = input.value;\r\n    });\r\n    return datos;\r\n}\r\n\r\nexport function limpiarHTML(element){\r\n    while(element.firstChild) {\r\n        element.removeChild(element.firstChild);\r\n    }\r\n}\r\n\r\nexport function loader(button){\r\n    // Hide the loading screen when the page is fully loaded\r\n    document.getElementById('loadingScreen').style.display = 'none';\r\n\r\n    //Add event listener for the button given to trigger the loader\r\n    button.addEventListener('click', showLoadingScreen);\r\n    \r\n    // Function to show the loading screen\r\n    function showLoadingScreen() {\r\n        document.getElementById('loadingScreen').style.display = 'flex';\r\n    }\r\n}\r\n\r\nexport async function eliminarItem(e){\r\n    e.preventDefault();\r\n\r\n    const lang = await readLang();\r\n    const alerts = await readJSON();\r\n    if(e.target.classList.contains('btn-delete')){\r\n        const id = e.target.value;\r\n        dashboardContenido.classList.add('overlay');\r\n\r\n        const alertaContenedor = document.createElement('div');\r\n        alertaContenedor.classList.add('modal-alerta--activo');\r\n        // alertaContenedor.onclick = cerrarAlerta;\r\n\r\n        const alertaDiv = document.createElement('DIV');\r\n        alertaDiv.classList.add('modal-alerta');\r\n\r\n        const alertaIcono = document.createElement('I');\r\n        alertaIcono.classList.add('fa-solid', 'fa-circle-exclamation', 'modal-alerta__icono');\r\n\r\n        const alertaTitulo = document.createElement('H3');\r\n        alertaTitulo.classList.add('modal-alerta__titulo');\r\n        alertaTitulo.textContent = alerts['delete_item'][lang];\r\n\r\n        const alertaParrafo = document.createElement('P');\r\n        alertaParrafo.classList.add('modal-alerta__parrafo');\r\n        alertaParrafo.textContent = alerts['delete_confirmation'][lang];\r\n\r\n        const alertaBotones = document.createElement('DIV');\r\n        alertaBotones.classList.add('modal-alerta__botones');\r\n\r\n        const alertaBotonCancelar = document.createElement('BUTTON');\r\n        alertaBotonCancelar.classList.add('modal-alerta__boton', 'modal-alerta__boton--cancelar');\r\n        alertaBotonCancelar.textContent = 'Cancelar';\r\n        alertaBotonCancelar.onclick = cerrarAlerta;\r\n\r\n        const btnCerrar = document.createElement('button');\r\n        btnCerrar.classList.add('deleteModal__btn-close');\r\n        btnCerrar.innerHTML = '<i class=\"fas fa-times\"></i>';\r\n        btnCerrar.onclick = cerrarAlerta;\r\n\r\n        const btnEliminar = document.createElement('button');\r\n        btnEliminar.classList.add('btn-delete');\r\n        btnEliminar.textContent = alerts['delete'][lang];\r\n        btnEliminar.value = id;\r\n        btnEliminar.dataset.type = e.target.dataset.type;\r\n        btnEliminar.dataset.role = e.target.dataset.role;\r\n        btnEliminar.dataset.item = e.target.dataset.item;\r\n        loader(btnEliminar);\r\n\r\n        //redirect to delete route\r\n        btnEliminar.onclick = (e) => {\r\n           if( e.target.dataset.type === undefined || e.target.dataset.type === 'undefined'){\r\n                window.location.href = `/${e.target.dataset.role}/${e.target.dataset.item}/delete?id=${e.target.value}`;\r\n            }\r\n            else{\r\n                window.location.href = `/${e.target.dataset.role}/${e.target.dataset.item}/delete?id=${e.target.value}&type=${e.target.dataset.type}`;\r\n            }\r\n        }\r\n\r\n        //Agregar botones al div de botones\r\n        alertaBotones.appendChild(alertaBotonCancelar);\r\n        alertaBotones.appendChild(btnEliminar);\r\n        alertaDiv.appendChild(alertaIcono);\r\n        alertaDiv.appendChild(alertaTitulo);\r\n        alertaDiv.appendChild(alertaParrafo);\r\n        alertaDiv.appendChild(alertaBotones);\r\n        alertaDiv.appendChild(btnCerrar);\r\n        alertaContenedor.appendChild(alertaDiv);\r\n        body.appendChild(alertaContenedor);\r\n    }\r\n}\r\nexport function cerrarAlerta(){\r\n    const alerta = document.querySelector('.modal-alerta--activo');\r\n    if(alerta){\r\n        alerta.remove();\r\n    }\r\n}\r\n\r\nexport function changeTabs(){\r\n    for(let i = 0; i < tabsBtns.length; i++){\r\n        tabsBtns[i].addEventListener('click', () => {\r\n            tabsBtns.forEach(btn => btn.classList.remove('tabs__lg--btn--active'));\r\n            tabsContent.forEach(content => content.style.display = 'none');\r\n            tabsBtns[i].classList.add('tabs__lg--btn--active');\r\n            tabsContent[i].style.display = 'block';\r\n        });\r\n    }\r\n}\r\n\r\nexport function btnSubmitLoader(){\r\n    submitBtns.forEach(btn => {\r\n        loader(btn);\r\n    });\r\n}"]}