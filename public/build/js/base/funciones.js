import{er,num,indicativo}from"../music/selectores.js";import{container}from"../filmtono/selectores.js";import{body,dashboardContenido,tabsBtns,tabsContent,tabsDiv}from"./selectores.js";import{tabs}from"../music/perfiles.js";export async function readLang(){try{const t=await fetch(window.location.origin+"/api/filmtono/lenguaje");return await t.json()}catch(t){console.log(t)}}export async function readJSON(){try{const t=await fetch(window.location.origin+"/api/filmtono/alerts",{mode:"cors"});return await t.json()}catch(t){console.log(t)}}export async function imprimirAlerta(t,e,a,r){const o=document.createElement("div");o.style.gridColumn="1 / 3","error"===e?o.classList.add("alerta__error"):o.classList.add("alerta__exito");const n=document.querySelector(".alerta__error");n&&n.remove();const l=await readLang(),i=await readJSON();o.textContent=i[t][l],a.insertBefore(o,r),setTimeout(()=>{o.remove()},4e3)}export function validarFormulario(t){const e=t.target.parentElement;if(t.target.value.length>0){const t=document.querySelector(".alerta__error");t&&t.remove()}else imprimirAlerta("input","error",e,t.target);"email"===t.target.type&&!1===er.test(t.target.value)&&imprimirAlerta("email","error",e,t.target),"select-one"===t.target.type&&("0"!==t.target.value&&""!==t.target.value||imprimirAlerta("select","error",e,t.target)),"tel"===t.target.type&&(!1===num.test(t.target.value)||t.target.value.length<8)&&imprimirAlerta("phone","error",e,t.target)}export function llenarDatos(){const t=document.querySelectorAll(".form input"),e=Array.from(t),a={};return e.forEach(t=>{a[t.id]=t.value}),a}export function limpiarHTML(t){for(;t.firstChild;)t.removeChild(t.firstChild)}export function loader(t){document.getElementById("loadingScreen").style.display="none",t.addEventListener("click",(function(){document.getElementById("loadingScreen").style.display="flex"}))}export async function eliminarItem(t){t.preventDefault();const e=await readLang(),a=await readJSON();if(t.target.classList.contains("btn-delete")){const r=t.target.value;dashboardContenido.classList.add("overlay");const o=document.createElement("div");o.classList.add("modal-alerta--activo");const n=document.createElement("DIV");n.classList.add("modal-alerta");const l=document.createElement("I");l.classList.add("fa-solid","fa-circle-exclamation","modal-alerta__icono");const i=document.createElement("H3");i.classList.add("modal-alerta__titulo"),i.textContent=a.delete_item[e];const s=document.createElement("P");s.classList.add("modal-alerta__parrafo"),s.textContent=a.delete_confirmation[e];const d=document.createElement("DIV");d.classList.add("modal-alerta__botones");const c=document.createElement("BUTTON");c.classList.add("modal-alerta__boton","modal-alerta__boton--cancelar"),c.textContent="Cancelar",c.onclick=cerrarAlerta;const m=document.createElement("button");m.classList.add("deleteModal__btn-close"),m.innerHTML='<i class="fas fa-times"></i>',m.onclick=cerrarAlerta;const p=document.createElement("button");p.classList.add("btn-delete"),p.textContent=a.delete[e],p.value=r,p.dataset.type=t.target.dataset.type,p.dataset.role=t.target.dataset.role,p.dataset.item=t.target.dataset.item,loader(p),p.onclick=t=>{void 0===t.target.dataset.type||"undefined"===t.target.dataset.type?window.location.href=`/${t.target.dataset.role}/${t.target.dataset.item}/delete?id=${t.target.value}`:window.location.href=`/${t.target.dataset.role}/${t.target.dataset.item}/delete?id=${t.target.value}&type=${t.target.dataset.type}`},d.appendChild(c),d.appendChild(p),n.appendChild(l),n.appendChild(i),n.appendChild(s),n.appendChild(d),n.appendChild(m),o.appendChild(n),body.appendChild(o)}}export function cerrarAlerta(){const t=document.querySelector(".modal-alerta--activo");t&&t.remove()}export function changeTabs(){for(let t=0;t<tabsBtns.length;t++)tabsBtns[t].addEventListener("click",()=>{tabsBtns.forEach(t=>t.classList.remove("tabs__lg--btn--active")),tabsContent.forEach(t=>t.style.display="none"),tabsBtns[t].classList.add("tabs__lg--btn--active"),tabsContent[t].style.display="block"})}
//# sourceMappingURL=funciones.js.map
