import{er,num,indicativo}from"../music/selectores.js";import{container}from"../filmtono/selectores.js";import{body,dashboardContenido}from"./selectores.js";export async function readLang(){try{const e=await fetch(window.location.origin+"/api/filmtono/lenguaje");return await e.json()}catch(e){console.log(e)}}export async function readJSON(){try{const e=await fetch(window.location.origin+"/api/filmtono/alerts",{mode:"cors"});return await e.json()}catch(e){console.log(e)}}export async function imprimirAlerta(e,t,a,r){const o=document.createElement("div");o.style.gridColumn="1 / 3","error"===t?o.classList.add("alerta__error"):o.classList.add("alerta__exito");const n=document.querySelector(".alerta__error");n&&n.remove();const l=await readLang(),i=await readJSON();o.textContent=i[e][l],a.insertBefore(o,r),setTimeout(()=>{o.remove()},4e3)}export function validarFormulario(e){const t=e.target.parentElement;if(e.target.value.length>0){const e=document.querySelector(".alerta__error");e&&e.remove()}else imprimirAlerta("input","error",t,e.target);"email"===e.target.type&&!1===er.test(e.target.value)&&imprimirAlerta("email","error",t,e.target),"select-one"===e.target.type&&("0"!==e.target.value&&""!==e.target.value||imprimirAlerta("select","error",t,e.target)),"tel"===e.target.type&&(!1===num.test(e.target.value)||e.target.value.length<8)&&imprimirAlerta("phone","error",t,e.target)}export function llenarDatos(){const e=document.querySelectorAll(".form input"),t=Array.from(e),a={};return t.forEach(e=>{a[e.id]=e.value}),a}export function limpiarHTML(e){for(;e.firstChild;)e.removeChild(e.firstChild)}export function loader(e){document.getElementById("loadingScreen").style.display="none",e.addEventListener("click",(function(){document.getElementById("loadingScreen").style.display="flex"}))}export async function eliminarItem(e){e.preventDefault();const t=await readLang(),a=await readJSON();if(e.target.classList.contains("btn-delete")){const r=e.target.value;dashboardContenido.classList.add("overlay");const o=document.createElement("div");o.classList.add("modal-alerta--activo");const n=document.createElement("DIV");n.classList.add("modal-alerta");const l=document.createElement("I");l.classList.add("fa-solid","fa-circle-exclamation","modal-alerta__icono");const i=document.createElement("H3");i.classList.add("modal-alerta__titulo"),i.textContent=a.delete_item[t];const d=document.createElement("P");d.classList.add("modal-alerta__parrafo"),d.textContent=a.delete_confirmation[t];const c=document.createElement("DIV");c.classList.add("modal-alerta__botones");const s=document.createElement("BUTTON");s.classList.add("modal-alerta__boton","modal-alerta__boton--cancelar"),s.textContent="Cancelar",s.onclick=cerrarAlerta;const m=document.createElement("button");m.classList.add("deleteModal__btn-close"),m.innerHTML='<i class="fas fa-times"></i>',m.onclick=cerrarAlerta;const u=document.createElement("button");u.classList.add("btn-delete"),u.textContent=a.delete[t],u.value=r,u.dataset.type=e.target.dataset.type,u.dataset.role=e.target.dataset.role,u.dataset.item=e.target.dataset.item,loader(u),u.onclick=e=>{void 0===e.target.dataset.type||"undefined"===e.target.dataset.type?window.location.href=`/${e.target.dataset.role}/${e.target.dataset.item}/delete?id=${e.target.value}`:window.location.href=`/${e.target.dataset.role}/${e.target.dataset.item}/delete?id=${e.target.value}&type=${e.target.dataset.type}`},c.appendChild(s),c.appendChild(u),n.appendChild(l),n.appendChild(i),n.appendChild(d),n.appendChild(c),n.appendChild(m),o.appendChild(n),body.appendChild(o)}}export function cerrarAlerta(){const e=document.querySelector(".modal-alerta--activo");e&&e.remove()}
//# sourceMappingURL=funciones.js.map
