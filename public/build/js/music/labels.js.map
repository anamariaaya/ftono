{"version":3,"sources":["music/labels.js"],"names":["gridSellos","sellosInput","readLang","readJSON","eliminarItem","normalizeText","async","consultaSellos","resultado","fetch","window","location","origin","mostrarSellos","json","error","console","log","datos","lang","forEach","sello","id","nombre","creado","cardSello","document","createElement","classList","add","cardInfo","titleSello","textContent","fechaSello","fechaFormat","Date","toLocaleDateString","year","month","day","cardActions","btnEditar","href","iconoLapiz","appendChild","btnEliminar","value","dataset","item","role","onclick","iconEliminar","filtrarSellos","addEventListener","e","texto","target","querySelectorAll","card","indexOf","style","display","marginRight","columnGap"],"mappings":"OAAQA,WAAYC,gBAAkB,yBAC9BC,SAAUC,SAAUC,aAAcC,kBAAoB,8BAEvDC,eAAeC,iBAClB,IACI,MAAMC,QAAkBC,MAAMC,OAAOC,SAASC,OAAO,qBAEtDC,oBADqBL,EAAUM,QAEjC,MAAMC,GACHC,QAAQC,IAAIF,IAIpBT,eAAeO,cAAcK,GACzB,MAAMC,QAAajB,iBACEC,WAErBe,EAAME,QAAQC,IAEV,MAAKC,GAACA,EAAEC,OAAEA,EAAMC,OAAEA,GAAUH,EAGtBI,EAAYC,SAASC,cAAc,OACzCF,EAAUG,UAAUC,IAAI,eAExB,MAAMC,EAAWJ,SAASC,cAAc,OACxCG,EAASF,UAAUC,IAAI,eAEvB,MAAME,EAAaL,SAASC,cAAc,KAC1CI,EAAWC,YAAcT,EACzBQ,EAAWH,UAAUC,IAAI,cAAe,qBAExC,MAAMI,EAAaP,SAASC,cAAc,KAIpCO,EAFO,IAAIC,KAAKX,GAEGY,mBAAmBjB,EAD5B,CAACkB,KAAM,UAAWC,MAAO,QAASC,IAAK,YAEvDN,EAAWD,YAAcE,EACzBD,EAAWL,UAAUC,IAAI,eAGzB,MAAMW,EAAcd,SAASC,cAAc,OAC3Ca,EAAYZ,UAAUC,IAAI,kBAG1B,MAAMY,EAAYf,SAASC,cAAc,KACzCc,EAAUb,UAAUC,IAAI,cACxBY,EAAUC,KAAO,yBAAyBpB,EAG1C,MAAMqB,EAAajB,SAASC,cAAc,KAC1CgB,EAAWf,UAAUC,IAAI,WAAY,YAAa,YAGlDY,EAAUG,YAAYD,GAEtB,MAAME,EAAcnB,SAASC,cAAc,UAC3CkB,EAAYjB,UAAUC,IAAI,cAC1BgB,EAAYvB,GAAK,WACjBuB,EAAYC,MAAQxB,EACpBuB,EAAYE,QAAQC,KAAO,SAC3BH,EAAYE,QAAQE,KAAO,QAC3BJ,EAAYK,QAAU9C,aAEtB,MAAM+C,EAAezB,SAASC,cAAc,KAC5CwB,EAAavB,UAAUC,IAAI,WAAY,eAAgB,YAEvDgB,EAAYD,YAAYO,GACxBX,EAAYI,YAAYH,GACxBD,EAAYI,YAAYC,GAExBf,EAASc,YAAYb,GACrBD,EAASc,YAAYX,GAErBR,EAAUmB,YAAYd,GACtBL,EAAUmB,YAAYJ,GAGtBxC,WAAW4C,YAAYnB,KAE3B2B,gBAGJ,SAASA,gBACLnD,YAAYoD,iBAAiB,QAASC,IAClC,MAAMC,EAAQlD,cAAciD,EAAEE,OAAOV,OACvBpB,SAAS+B,iBAAiB,gBAElCrC,QAAQsC,KAEoB,IADfrD,cAAcqD,EAAK1B,aACxB2B,QAAQJ,IACdG,EAAKE,MAAMC,QAAU,OACrBH,EAAKE,MAAME,YAAc,OACzB9D,WAAW4D,MAAMG,UAAY,KAE7BL,EAAKE,MAAMC,QAAU","file":"labels.js","sourcesContent":["import {gridSellos, sellosInput} from './selectores.js';\r\nimport {readLang, readJSON, eliminarItem, normalizeText} from '../base/funciones.js';\r\n\r\nexport async function consultaSellos(){\r\n    try{\r\n        const resultado = await fetch(window.location.origin+'/api/music/labels');\r\n        const datos = await resultado.json();\r\n       mostrarSellos(datos);\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nasync function mostrarSellos(datos){\r\n    const lang = await readLang();\r\n    const alerts = await readJSON();\r\n\r\n    datos.forEach(sello => {\r\n        //extract the type of contract from the name of the file nombre_doc\r\n        const{id, nombre, creado} = sello;\r\n\r\n        //Create the info section\r\n        const cardSello = document.createElement('div');\r\n        cardSello.classList.add('cards__card');\r\n\r\n        const cardInfo = document.createElement('div');\r\n        cardInfo.classList.add('cards__info');\r\n\r\n        const titleSello = document.createElement('p');\r\n        titleSello.textContent = nombre;\r\n        titleSello.classList.add('cards__text', 'cards__text--span');\r\n\r\n        const fechaSello = document.createElement('p');\r\n        //add date as day/month/year\r\n        const date = new Date(creado);\r\n        const options = {year: 'numeric', month: 'short', day: 'numeric'};\r\n        const fechaFormat = date.toLocaleDateString(lang, options);\r\n        fechaSello.textContent = fechaFormat;\r\n        fechaSello.classList.add('cards__text');\r\n\r\n        //Create the actions section\r\n        const cardActions = document.createElement('div');\r\n        cardActions.classList.add('cards__actions');\r\n\r\n        //generar el botón para editar el sello\r\n        const btnEditar = document.createElement('A');\r\n        btnEditar.classList.add('btn-update');\r\n        btnEditar.href = '/music/labels/edit?id='+id;\r\n\r\n        //generar ícono de lápiz para el botón de editar\r\n        const iconoLapiz = document.createElement('I');\r\n        iconoLapiz.classList.add('fa-solid', 'fa-pencil', 'no-click');\r\n\r\n        //Agregar el ícono al botón\r\n        btnEditar.appendChild(iconoLapiz);\r\n\r\n        const btnEliminar = document.createElement('button');\r\n        btnEliminar.classList.add('btn-delete');\r\n        btnEliminar.id = 'eliminar';\r\n        btnEliminar.value = id;\r\n        btnEliminar.dataset.item = 'labels';\r\n        btnEliminar.dataset.role = 'music';\r\n        btnEliminar.onclick = eliminarItem;\r\n\r\n        const iconEliminar = document.createElement('i');\r\n        iconEliminar.classList.add('fa-solid', 'fa-trash-can', 'no-click');\r\n\r\n        btnEliminar.appendChild(iconEliminar);\r\n        cardActions.appendChild(btnEditar);\r\n        cardActions.appendChild(btnEliminar);\r\n\r\n        cardInfo.appendChild(titleSello);\r\n        cardInfo.appendChild(fechaSello);\r\n\r\n        cardSello.appendChild(cardInfo);\r\n        cardSello.appendChild(cardActions);\r\n\r\n  \r\n        gridSellos.appendChild(cardSello);\r\n    });\r\n    filtrarSellos();\r\n}\r\n\r\nfunction filtrarSellos(){\r\n    sellosInput.addEventListener('input', e => {\r\n        const texto = normalizeText(e.target.value);\r\n        const cards = document.querySelectorAll('.cards__card');\r\n\r\n        cards.forEach(card => {\r\n            const nombre = normalizeText(card.textContent);\r\n            if(nombre.indexOf(texto) !== -1){\r\n                card.style.display = 'flex';\r\n                card.style.marginRight = '2rem';\r\n                gridSellos.style.columnGap = '0';\r\n            }else{\r\n                card.style.display = 'none';\r\n            }\r\n        });\r\n    }); \r\n}"]}