{"version":3,"sources":["music/APIPaises.js"],"names":["validarFormulario","selectPais","paisContacto","indicativo","countrySelected","paisValue","readLang","async","consultaPaises","url","resultado","fetch","mostrarPaises","json","error","console","log","datos","then","lang","forEach","pais","sort","a","b","translations","spa","common","option","document","createElement","value","cca2","textContent","setAttribute","appendChild","cloneNode","name","paisElegido","addEventListener","indicativoTel","e","target","respuesta","Object","keys","idd","length","root","suffix","suffixes","countryCurrentValue","countryValue","id"],"mappings":"OAASA,sBAAyB,8BACzBC,WAAYC,aAAcC,WAAYC,gBAAiBC,cAAiB,yBACxEC,aAAe,8BAEjBC,eAAeC,iBAClB,IACI,IAAIC,EAAM,qCAEV,MAAMC,QAAkBC,MAAMF,GAE9BG,oBADoBF,EAAUG,QAEjC,MAAMC,GACHC,QAAQC,IAAIF,IAKpB,SAASF,cAAcK,GAEnBX,WAAWY,KAAKC,IACI,OAATA,EACCF,EAAMG,QAAQC,IAEVJ,EAAMK,KAAK,CAACC,EAAGC,IACRD,EAAEE,aAAaC,IAAIC,OAASH,EAAEC,aAAaC,IAAIC,QACtC,EAETJ,EAAEE,aAAaC,IAAIC,OAASH,EAAEC,aAAaC,IAAIC,OACvC,EAEJ,GAGX,MAAMC,EAASC,SAASC,cAAc,UACtCF,EAAOG,MAAQV,EAAKW,KACpBJ,EAAOK,YAAcZ,EAAKI,aAAaC,IAAIC,OAC3CC,EAAOM,aAAa,YAAab,EAAKI,aAAaC,IAAIC,QACvD1B,WAAWkC,YAAYP,GACpB1B,cACCA,aAAaiC,YAAYP,EAAOQ,WAAU,MAIlDnB,EAAMG,QAAQC,IAEVJ,EAAMK,KAAK,CAACC,EAAGC,IACRD,EAAEc,KAAKV,OAASH,EAAEa,KAAKV,QACd,EAETJ,EAAEc,KAAKV,OAASH,EAAEa,KAAKV,OACf,EAEJ,GAIX,MAAMC,EAASC,SAASC,cAAc,UACtCF,EAAOG,MAAQV,EAAKW,KACpBJ,EAAOK,YAAcZ,EAAKgB,KAAKV,OAC5B1B,YACCA,WAAWkC,YAAYP,GAExB1B,cACCA,aAAaiC,YAAYP,EAAOQ,WAAU,eAQ3D,SAASE,cACTrC,YACCA,WAAWsC,iBAAiB,OAAQvC,mBAErCE,cACCA,aAAaqC,iBAAiB,OAAQvC,0BAIvC,SAASwC,gBACZtC,aAAaqC,iBAAiB,UAAU,SAASE,GAC7C,GAAsB,KAAnBA,EAAEC,OAAOX,MAAa,CAErB,MAAMtB,EAAM,wCAAwCgC,EAAEC,OAAOX,MAC7DpB,MAAMF,GACDS,KAAKyB,GAAaA,EAAU9B,QAC5BK,KAAKD,IAGF,GADAF,QAAQC,MACgC,IAArC4B,OAAOC,KAAK5B,EAAM,GAAG6B,KAAKC,OACzB5C,WAAW4B,MAAQ,SACjB,CACF,MAAMiB,EAAO/B,EAAM,GAAG6B,IAAIE,KACpBC,EAAShC,EAAM,GAAG6B,IAAII,SAAS,GACrC/C,WAAW4B,MAAQ,GAAGiB,IAAOC,IAC7B9C,WAAW+B,aAAa,WAAY,YACpC/B,WAAW+B,aAAa,QAAS,GAAGc,IAAOC,mBAO5D,SAASE,sBACZ,MAAM1C,EAAM,wCAAwCL,gBAAgB2B,MACpEpB,MAAMF,GACDS,KAAKyB,GAAYA,EAAU9B,QAC3BK,KAAKD,IACFX,WAAWY,KAAKC,IAERf,gBAAgB6B,YADR,OAATd,EAC+BF,EAAM,GAAGQ,aAAaC,IAAIC,OAE1BV,EAAM,GAAGoB,KAAKV,kBAMzD,SAASyB,eACZ/C,UAAUe,QAAQC,IACd,MAAMZ,EAAM,wCAAwCY,EAAKgC,GAC7D1C,MAAMF,GACDS,KAAKyB,GAAYA,EAAU9B,QAC3BK,KAAKD,IACFX,WAAWY,KAAKC,IAERE,EAAKY,YADG,OAATd,EACoBF,EAAM,GAAGQ,aAAaC,IAAIC,OAE1BV,EAAM,GAAGoB,KAAKV","file":"APIPaises.js","sourcesContent":["import { validarFormulario } from \"../base/funciones.js\";\r\nimport { selectPais, paisContacto, indicativo, countrySelected, paisValue } from \"./selectores.js\";\r\nimport  {readLang} from \"../base/funciones.js\";\r\n\r\nexport async function consultaPaises(){\r\n    try{\r\n        let url = `https://restcountries.com/v3.1/all`;\r\n\r\n        const resultado = await fetch(url);\r\n        const datos = await resultado.json();\r\n        mostrarPaises(datos);\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\n\r\n\r\nfunction mostrarPaises(datos){\r\n    // selected.textContent = datos[0].name.common;\r\n    readLang().then(lang => {\r\n            if(lang === 'es'){\r\n                datos.forEach(pais => {\r\n                    //ordenar los paises por orden alfabético\r\n                    datos.sort((a, b) => {\r\n                        if(a.translations.spa.common < b.translations.spa.common){\r\n                            return -1;\r\n                        }\r\n                        if(a.translations.spa.common > b.translations.spa.common){\r\n                            return 1;\r\n                        }\r\n                        return 0;\r\n                    });\r\n                    //crear option con el nombre del pais\r\n                    const option = document.createElement('option');\r\n                    option.value = pais.cca2;\r\n                    option.textContent = pais.translations.spa.common;\r\n                    option.setAttribute('data-pais', pais.translations.spa.common);\r\n                    selectPais.appendChild(option);\r\n                    if(paisContacto){\r\n                        paisContacto.appendChild(option.cloneNode(true));\r\n                    }\r\n                });\r\n            } else{\r\n                datos.forEach(pais => {\r\n                    //ordenar los países por orden alfabético\r\n                    datos.sort((a, b) => {\r\n                        if(a.name.common < b.name.common){\r\n                            return -1;\r\n                        }\r\n                        if(a.name.common > b.name.common){\r\n                            return 1;\r\n                        }\r\n                        return 0;\r\n                    });\r\n\r\n                    //crear option con el nombre del pais\r\n                    const option = document.createElement('option');\r\n                    option.value = pais.cca2;\r\n                    option.textContent = pais.name.common;\r\n                    if(selectPais){\r\n                        selectPais.appendChild(option);  \r\n                    }\r\n                    if(paisContacto){\r\n                        paisContacto.appendChild(option.cloneNode(true));\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    );\r\n}\r\n\r\nexport function paisElegido(){\r\n    if(selectPais){\r\n        selectPais.addEventListener('blur', validarFormulario);\r\n    }\r\n    if(paisContacto){\r\n        paisContacto.addEventListener('blur', validarFormulario);\r\n    }\r\n}\r\n\r\nexport function indicativoTel(){\r\n    paisContacto.addEventListener('change', function(e){\r\n        if(e.target.value !== ''){\r\n            //consultar API para obtener el indicativo\r\n            const url = `https://restcountries.com/v3.1/alpha/${e.target.value}`;\r\n            fetch(url)\r\n                .then(respuesta => respuesta.json())\r\n                .then(datos => {      \r\n                    //leer longitud de un array\r\n                    console.log();              \r\n                    if(Object.keys(datos[0].idd).length === 0){\r\n                        indicativo.value = '0-';\r\n                    } else{\r\n                        const root = datos[0].idd.root;\r\n                        const suffix = datos[0].idd.suffixes[0];\r\n                        indicativo.value = `${root}${suffix}`;\r\n                        indicativo.setAttribute('readonly', 'readonly');\r\n                        indicativo.setAttribute('value', `${root}${suffix}`);\r\n                    }\r\n                });\r\n        }\r\n    });\r\n}\r\n\r\nexport function countryCurrentValue(){\r\n    const url = `https://restcountries.com/v3.1/alpha/${countrySelected.value}`;\r\n    fetch(url)\r\n        .then(respuesta=> respuesta.json())\r\n        .then(datos => {\r\n            readLang().then(lang => {\r\n                if(lang === 'es'){\r\n                    countrySelected.textContent = datos[0].translations.spa.common;\r\n                } else{\r\n                    countrySelected.textContent = datos[0].name.common;\r\n                }\r\n            });\r\n        });\r\n}\r\n\r\nexport function countryValue(){\r\n    paisValue.forEach(pais => {\r\n        const url = `https://restcountries.com/v3.1/alpha/${pais.id}`;\r\n    fetch(url)\r\n        .then(respuesta=> respuesta.json())\r\n        .then(datos => {\r\n            readLang().then(lang => {\r\n                if(lang === 'es'){\r\n                    pais.textContent = datos[0].translations.spa.common;\r\n                } else{\r\n                    pais.textContent = datos[0].name.common;\r\n                }\r\n            });\r\n        });\r\n    });\r\n}\r\n\r\n"]}