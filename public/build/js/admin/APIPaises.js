import{validarFormulario}from"../base/funciones.js";import{selectPais,paisContacto,indicativo,countrySelected}from"./selectores.js";import{readLang}from"../base/funciones.js";export async function consultaPaises(){try{let t="https://restcountries.com/v3.1/all";const o=await fetch(t);mostrarPaises(await o.json())}catch(t){console.log(t)}}function mostrarPaises(t){readLang().then(o=>{"es"===o?t.forEach(o=>{t.sort((t,o)=>t.translations.spa.common<o.translations.spa.common?-1:t.translations.spa.common>o.translations.spa.common?1:0);const e=document.createElement("option");e.value=o.cca2,e.textContent=o.translations.spa.common,e.setAttribute("data-pais",o.translations.spa.common),selectPais.appendChild(e),paisContacto&&paisContacto.appendChild(e.cloneNode(!0))}):t.forEach(o=>{t.sort((t,o)=>t.name.common<o.name.common?-1:t.name.common>o.name.common?1:0);const e=document.createElement("option");e.value=o.cca2,e.textContent=o.name.common,selectPais&&selectPais.appendChild(e),paisContacto&&paisContacto.appendChild(e.cloneNode(!0))})})}export function paisElegido(){selectPais&&selectPais.addEventListener("blur",validarFormulario),paisContacto&&paisContacto.addEventListener("blur",validarFormulario)}export function indicativoTel(){paisContacto.addEventListener("change",(function(t){if(""!==t.target.value){const o="https://restcountries.com/v3.1/alpha/"+t.target.value;fetch(o).then(t=>t.json()).then(t=>{if(console.log(),0===Object.keys(t[0].idd).length)indicativo.value="0-";else{const o=t[0].idd.root,e=t[0].idd.suffixes[0];indicativo.value=`${o}${e}`,indicativo.setAttribute("readonly","readonly"),indicativo.setAttribute("value",`${o}${e}`)}})}}))}export function countryCurrentValue(){const t="https://restcountries.com/v3.1/alpha/"+countrySelected.value;fetch(t).then(t=>t.json()).then(t=>{readLang().then(o=>{countrySelected.textContent="es"===o?t[0].translations.spa.common:t[0].name.common})})}
//# sourceMappingURL=APIPaises.js.map
