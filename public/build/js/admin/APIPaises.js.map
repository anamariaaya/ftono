{"version":3,"sources":["admin/APIPaises.js"],"names":["selectPais","async","readLang","resultado","fetch","json","error","console","log","consultaPaises","url","mostrarPaises","datos","then","lang","forEach","pais","sort","a","b","translations","spa","common","option","document","createElement","value","textContent","appendChild","name","paisElegido","addEventListener","e","target"],"mappings":"OAASA,eAAkB,kBAC3BC,eAAeC,WACX,IACI,MAAMC,QAAkBC,MAAM,+CAE9B,aADmBD,EAAUE,OAEhC,MAAMC,GACHC,QAAQC,IAAIF,WAIbL,eAAeQ,iBAClB,IACI,IAAIC,EAAM,qCAIV,MAAMP,QAAkBC,MAAMM,GAE9BC,oBADoBR,EAAUE,QAEjC,MAAMC,GACHC,QAAQC,IAAIF,IAKpB,SAASK,cAAcC,GACnBV,WAAWW,KAAKC,IACI,OAATA,EACCF,EAAMG,QAAQC,IAEVJ,EAAMK,KAAK,CAACC,EAAGC,IACRD,EAAEE,aAAaC,IAAIC,OAASH,EAAEC,aAAaC,IAAIC,QACtC,EAETJ,EAAEE,aAAaC,IAAIC,OAASH,EAAEC,aAAaC,IAAIC,OACvC,EAEJ,GAGX,MAAMC,EAASC,SAASC,cAAc,UACtCF,EAAOG,MAAQV,EAAKI,aAAaC,IAAIC,OACrCC,EAAOI,YAAcX,EAAKI,aAAaC,IAAIC,OAC3CtB,WAAW4B,YAAYL,KAG3BX,EAAMG,QAAQC,IAEVJ,EAAMK,KAAK,CAACC,EAAGC,IACRD,EAAEW,KAAKP,OAASH,EAAEU,KAAKP,QACd,EAETJ,EAAEW,KAAKP,OAASH,EAAEU,KAAKP,OACf,EAEJ,GAIX,MAAMC,EAASC,SAASC,cAAc,UACtCF,EAAOG,MAAQV,EAAKa,KAAKP,OACzBC,EAAOI,YAAcX,EAAKa,KAAKP,OAC/BtB,WAAW4B,YAAYL,cAOpC,SAASO,cACZ9B,WAAW+B,iBAAiB,SAAUC,IAClC,MAAMhB,EAAOgB,EAAEC,OAAOP,MACtBnB,QAAQC,IAAIQ","file":"APIPaises.js","sourcesContent":["import { selectPais } from \"./selectores.js\";\r\nasync function readLang(){\r\n    try{\r\n        const resultado = await fetch('http://localhost:3000/api/filmtono/lenguaje');\r\n        const data = await resultado.json();\r\n        return data;\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nexport async function consultaPaises(){\r\n    try{\r\n        let url = `https://restcountries.com/v3.1/all`;\r\n        // if(lang !== 'en'){\r\n        //     url += `&lang=${lang}`;\r\n        // }\r\n        const resultado = await fetch(url);\r\n        const datos = await resultado.json();\r\n        mostrarPaises(datos);\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\n\r\n\r\nfunction mostrarPaises(datos){\r\n    readLang().then(lang => {\r\n            if(lang === 'es'){\r\n                datos.forEach(pais => {\r\n                    //ordenar los paises por orden alfabético\r\n                    datos.sort((a, b) => {\r\n                        if(a.translations.spa.common < b.translations.spa.common){\r\n                            return -1;\r\n                        }\r\n                        if(a.translations.spa.common > b.translations.spa.common){\r\n                            return 1;\r\n                        }\r\n                        return 0;\r\n                    });\r\n                    //crear option con el nombre del pais\r\n                    const option = document.createElement('option');\r\n                    option.value = pais.translations.spa.common;\r\n                    option.textContent = pais.translations.spa.common;\r\n                    selectPais.appendChild(option);\r\n                });\r\n            } else{\r\n                datos.forEach(pais => {\r\n                    //ordenar los países por orden alfabético\r\n                    datos.sort((a, b) => {\r\n                        if(a.name.common < b.name.common){\r\n                            return -1;\r\n                        }\r\n                        if(a.name.common > b.name.common){\r\n                            return 1;\r\n                        }\r\n                        return 0;\r\n                    });\r\n\r\n                    //crear option con el nombre del pais\r\n                    const option = document.createElement('option');\r\n                    option.value = pais.name.common;\r\n                    option.textContent = pais.name.common;\r\n                    selectPais.appendChild(option);  \r\n                });\r\n            }\r\n        }\r\n    );\r\n}\r\n\r\nexport function paisElegido(){\r\n    selectPais.addEventListener('change', e => {\r\n        const pais = e.target.value;\r\n        console.log(pais);\r\n    });\r\n}\r\n\r\n"]}