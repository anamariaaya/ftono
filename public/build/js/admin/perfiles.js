import{btnRegistro,btnMenu}from"./selectores.js";import{form}from"./form.js";import{datosEmpresa}from"./Empresa.js";import{llenarDatos}from"../base/funciones.js";import{sellos}from"./sellos.js";export function bloquearBotones(){btnRegistro&&(btnMenu.forEach(e=>{e.classList.add("disabled")}),btnRegistro.addEventListener("click",modalRegistro))}function modalRegistro(e){e.preventDefault();const a=document.querySelector("body");a.classList.add("overlay");const o=document.createElement("div");o.classList.add("register");const t=document.createElement("div");t.classList.add("register__modal");const s=document.createElement("button");s.classList.add("register__btn-cerrar"),s.innerHTML='<i class="fas fa-times"></i>',s.onclick=cerrarModal;const r=document.createElement("h3");r.classList.add("register__titulo"),r.textContent="Completa tu registro";const l=document.createElement("button");l.classList.add("btn-submit"),l.onclick=sincronizarDatos,l.textContent="Registrarse",t.appendChild(s),t.appendChild(r),t.appendChild(form),t.appendChild(l),o.appendChild(t),a.appendChild(o)}function sincronizarDatos(){const e=llenarDatos();datosEmpresa.empresa=e.empresa,datosEmpresa.id_fiscal=e.id_fiscal,datosEmpresa.direccion=e.direccion,datosEmpresa.ciudad=e.ciudad,datosEmpresa.pais=e.pais,datosEmpresa.instagram=e.instagram,datosEmpresa.nombre_comercial=e.nombre_comercial,datosEmpresa.apellido_comercial=e.apellido_comercial,datosEmpresa.email_comercial=e.email_comercial,datosEmpresa.tel_comercial=e.tel_comercial,datosEmpresa.nombre_contable=e.nombre_contable,datosEmpresa.apellido_contable=e.apellido_contable,datosEmpresa.email_contable=e.email_contable,datosEmpresa.tel_contable=e.tel_contable,apiRegistro()}async function apiRegistro(){const e=new FormData;e.append("empresa",datosEmpresa.empresa),e.append("id_fiscal",datosEmpresa.id_fiscal),e.append("direccion",datosEmpresa.direccion),e.append("ciudad",datosEmpresa.ciudad),e.append("pais",datosEmpresa.pais),e.append("instagram",datosEmpresa.instagram),e.append("nombre_comercial",datosEmpresa.nombre_comercial),e.append("apellido_comercial",datosEmpresa.apellido_comercial),e.append("email_comercial",datosEmpresa.email_comercial),e.append("tel_comercial",datosEmpresa.tel_comercial),e.append("nombre_contable",datosEmpresa.nombre_contable),e.append("apellido_contable",datosEmpresa.apellido_contable),e.append("email_contable",datosEmpresa.email_contable),e.append("tel_contable",datosEmpresa.tel_contable);try{const a="http://localhost:3000/api/profile",o=await fetch(a,{method:"POST",body:e});(await o.json()).resultado&&(statusPerfil(),selloPerfil(),Swal.fire({title:"Registro exitoso",text:"Ya puedes utilizar la plataforma",icon:"success"}).then(()=>{window.location.reload()}))}catch(e){console.log(e),Swal.fire({title:"Error",text:"Mensaje no enviado. Intenta de nuevo",icon:"error"}).then(()=>{window.location.reload()})}}async function statusPerfil(){const e=new FormData;e.append("perfil","1");try{const a="http://localhost:3000/api/profile/status",o=await fetch(a,{method:"POST",body:e});(await o.json()).resultado&&console.log("status actualizado")}catch(e){console.log(e)}}async function selloPerfil(){sellos.nombre=datosEmpresa.empresa;const e=new FormData;e.append("nombre",sellos.nombre);try{const a="http://localhost:3000/api/profile/sellos",o=await fetch(a,{method:"POST",body:e});(await o.json()).resultado&&console.log("sello agregado")}catch(e){console.log(e)}}function cerrarModal(){const e=document.querySelector("body"),a=document.querySelector(".register");e.classList.remove("overlay"),a.remove()}
//# sourceMappingURL=perfiles.js.map
