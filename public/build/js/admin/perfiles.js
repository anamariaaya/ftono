import{botones,pagAnterior,pagSiguiente,afterNav,btnContrato,nombre,email,cargo,telContacto,empresa,idFiscal,direccion,terms,privacy,divCheck,btnSubmit,paisContacto}from"./selectores.js";import{validarFormulario}from"../base/funciones.js";import{readLang,readJSON}from"../base/funciones.js";export function formularioReg(){cargo.addEventListener("blur",validarFormulario),telContacto.addEventListener("blur",validarFormulario),empresa.addEventListener("blur",validarFormulario),idFiscal.addEventListener("blur",validarFormulario),direccion.addEventListener("blur",validarFormulario)}let paso=1;export function tabs(){botones.forEach(e=>{e.addEventListener("click",(function(e){paso=e.target.dataset.paso,cambiarSeccion(e),botonesPaginador()}))})}const secciones=document.querySelectorAll(".tabs__section");function cambiarSeccion(e){const t=document.querySelector("#paso-"+paso);t.classList.add("mostrar"),e.target.classList.add("active"),"paso-1"===t.id?(botones[0].classList.add("active"),botones[1].classList.remove("active"),botones[2].classList.remove("active"),secciones[0].classList.add("mostrar"),secciones[1].classList.remove("mostrar"),secciones[2].classList.remove("mostrar")):"paso-2"===t.id?(botones[1].classList.add("active"),botones[2].classList.remove("active"),secciones[1].classList.add("mostrar"),secciones[2].classList.remove("mostrar"),secciones[0].classList.remove("mostrar")):(botones[1].classList.add("active"),botones[2].classList.add("active"),secciones[2].classList.add("mostrar"),secciones[0].classList.remove("mostrar"),secciones[1].classList.remove("mostrar"))}function botonesPaginador(){switch(paso){case"1":pagAnterior.classList.add("ocultar"),pagSiguiente.classList.remove("ocultar"),afterNav.classList.remove("step2"),afterNav.classList.remove("step3"),pagSiguiente.textContent="Siguiente ➟",pagSiguiente.classList.remove("btn-tabs--disabled");break;case"2":pagAnterior.classList.remove("ocultar"),pagSiguiente.classList.remove("ocultar"),afterNav.classList.add("step2"),afterNav.classList.remove("step3"),pagSiguiente.classList.remove("btn-tabs--disabled"),pagSiguiente.textContent="Siguiente ➟";break;case"3":pagAnterior.classList.remove("ocultar"),pagSiguiente.textContent="Registrarse ✓",pagSiguiente.onclick=validarCheck,afterNav.classList.add("step3"),afterNav.classList.remove("step2"),btnContrato&&btnContrato.forEach(e=>{e.onclick=modalContrato})}}export function paginador(){pagAnterior.addEventListener("click",paginaAnterior),pagSiguiente.addEventListener("click",paginaSiguiente)}function validarCheck(e){if(e.preventDefault(),terms.checked)if(privacy.checked){const e=[cargo,telContacto,empresa,idFiscal,direccion];Array.from(e).every(e=>""!==e.value)?btnSubmit.click():alertaCheck("inputs")}else alertaCheck("privacy");else alertaCheck("terms")}async function alertaCheck(e){const t=document.createElement("div");t.classList.add("alerta__error");const a=document.querySelector(".alerta__error");a&&a.remove();const o=await readLang(),s=await readJSON();t.textContent=s[e][o],divCheck.appendChild(t),setTimeout(()=>{t.remove()},1e5)}function paginaSiguiente(){botones[1].classList.contains("active")?botones[2].classList.contains("active")||botones[2].click():botones[1].click()}function paginaAnterior(e){botones[2].classList.contains("active")?botones[1].click():botones[1].classList.contains("active")&&botones[0].click()}async function getContrato(e){try{const t=await fetch(e);return await t.json()}catch(e){console.log(e)}}async function modalContrato(e){e.preventDefault();const t=await readLang(),a=await readJSON(),o=document.querySelector("body");o.classList.add("overlay");const s=document.createElement("div");s.classList.add("register");const n=document.createElement("div");n.classList.add("register__modal");const c=document.createElement("button");let i;c.classList.add("register__btn-cerrar"),c.innerHTML='<i class="fas fa-times"></i>',c.onclick=cerrarModal,i="contrato-musical"===e.target.id?"http://localhost:3000/api/filmtono/c-musical":"http://localhost:3000/api/filmtono/c-artistico";const r=document.createElement("div"),l=await getContrato(i);r.innerHTML=l;const d=document.createElement("P");d.textContent=a.signature[t],d.classList.add("firma");const u=document.createElement("P");u.textContent=a.signatureInfo[t],u.classList.add("firma__info");const m=document.createElement("form"),p=document.createElement("canvas");p.id="canvasSignature",p.width=600,p.height=200,p.style.border="1px solid black",p.style.backgroundColor="white",p.style.margin="0 auto",p.style.display="block";const v=p.getContext("2d");v.fillStyle="white",v.strokeStyle="black",v.lineWidth=2,v.lineCap="round";let g=!1,f=0,L=0;function b(e){g=!0,e.touches?[f,L]=[e.touches[0].pageX-e.target.offsetLeft,e.touches[0].pageY-e.target.offsetTop]:[f,L]=[e.offsetX,e.offsetY]}function h(e){g&&(v.beginPath(),e.touches?(v.moveTo(f,L),v.lineTo(e.touches[0].pageX-e.target.offsetLeft,e.touches[0].pageY-e.target.offsetTop),[f,L]=[e.touches[0].pageX-e.target.offsetLeft,e.touches[0].pageY-e.target.offsetTop]):(v.moveTo(f,L),v.lineTo(e.offsetX,e.offsetY),[f,L]=[e.offsetX,e.offsetY]),v.stroke())}function C(){g=!1,v.beginPath()}p.addEventListener("mousedown",b),p.addEventListener("mousemove",h),p.addEventListener("mouseup",C),p.addEventListener("touchstart",b),p.addEventListener("touchmove",h),p.addEventListener("touchend",C);const y=document.createElement("button");y.classList.add("btn-contrato--optional"),y.textContent=a.clear[t],y.onclick=function(){v.clearRect(0,0,p.width,p.height)};const S=document.createElement("input");S.type="hidden",S.name="signature",S.id="signature",S.value=p.toDataURL();const k=document.createElement("input");k.type="submit",k.value=a.sign[t],k.classList.add("btn-contrato--optional");const E=document.createElement("button");E.classList.add("btn-tabs"),E.textContent="Guardar",m.appendChild(p),m.appendChild(S),m.appendChild(k),n.appendChild(c),n.appendChild(r),n.appendChild(d),n.appendChild(u),n.appendChild(m),n.appendChild(y),n.appendChild(E),s.appendChild(n),o.appendChild(s),datosContrato(p)}async function datosContrato(e){document.querySelector("#contract-empresa").textContent=empresa.value;document.querySelector("#contract-nombre").textContent=nombre.value;document.querySelector("#contract-id-fiscal").textContent=idFiscal.value;document.querySelector("#contract-direccion").textContent=direccion.value;document.querySelector("#contract-pais").textContent=paisContacto.getAttribute("data-name");document.querySelector("#contract-email").textContent=email.value;const t=document.getElementById("signature-img");e.addEventListener("click",()=>{console.log(e.toDataURL()),t.src=e.toDataURL(),t.classList.remove("no-display"),console.log(t)})}function cerrarModal(){const e=document.querySelector("body"),t=document.querySelector(".register");e.classList.remove("overlay"),t.remove()}
//# sourceMappingURL=perfiles.js.map
