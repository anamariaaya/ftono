import{botones,pagAnterior,pagSiguiente,afterNav,btnContrato,cargo,telContacto,empresa,idFiscal,direccion,terms,privacy,divCheck}from"./selectores.js";import{validarFormulario,readLang,readJSON}from"../base/funciones.js";export function formularioReg(){cargo.addEventListener("blur",validarFormulario),telContacto.addEventListener("blur",validarFormulario),empresa.addEventListener("blur",validarFormulario),idFiscal.addEventListener("blur",validarFormulario),direccion.addEventListener("blur",validarFormulario)}let paso=1;export function tabs(){botones.forEach(e=>{e.addEventListener("click",(function(e){paso=e.target.dataset.paso,cambiarSeccion(e),botonesPaginador()}))})}const secciones=document.querySelectorAll(".tabs__section");function cambiarSeccion(e){const t=document.querySelector("#paso-"+paso);t.classList.add("mostrar"),e.target.classList.add("active"),"paso-1"===t.id?(botones[0].classList.add("active"),botones[1].classList.remove("active"),botones[2].classList.remove("active"),secciones[0].classList.add("mostrar"),secciones[1].classList.remove("mostrar"),secciones[2].classList.remove("mostrar")):"paso-2"===t.id?(botones[1].classList.add("active"),botones[2].classList.remove("active"),secciones[1].classList.add("mostrar"),secciones[2].classList.remove("mostrar"),secciones[0].classList.remove("mostrar")):(botones[1].classList.add("active"),botones[2].classList.add("active"),secciones[2].classList.add("mostrar"),secciones[0].classList.remove("mostrar"),secciones[1].classList.remove("mostrar"))}function botonesPaginador(){switch(paso){case"1":pagAnterior.classList.add("ocultar"),pagSiguiente.classList.remove("ocultar"),afterNav.classList.remove("step2"),afterNav.classList.remove("step3"),pagSiguiente.textContent="Siguiente ➟",pagSiguiente.classList.remove("btn-tabs--disabled");break;case"2":pagAnterior.classList.remove("ocultar"),pagSiguiente.classList.remove("ocultar"),afterNav.classList.add("step2"),afterNav.classList.remove("step3"),pagSiguiente.classList.remove("btn-tabs--disabled"),pagSiguiente.textContent="Siguiente ➟";break;case"3":pagAnterior.classList.remove("ocultar"),pagSiguiente.textContent="Registrarse ✓",pagSiguiente.onclick=setType,pagSiguiente.onclick=validarCheck,afterNav.classList.add("step3"),afterNav.classList.remove("step2"),btnContrato&&btnContrato.forEach(e=>{e.onclick=modalContrato})}}export function paginador(){pagAnterior.addEventListener("click",paginaAnterior),pagSiguiente.addEventListener("click",paginaSiguiente)}function validarCheck(e){if(e.preventDefault(),terms.checked)if(privacy.checked){const e=[cargo,telContacto,empresa,idFiscal,pais,direccion];Array.from(e).every(e=>""!==e.value)?console.log("todo ok"):alertaCheck("inputs")}else alertaCheck("privacy");else alertaCheck("terms")}async function alertaCheck(e){const t=document.createElement("div");t.classList.add("alerta__error");const a=document.querySelector(".alerta__error");a&&a.remove();const o=await readLang(),s=await readJSON();t.textContent=s[e][o],divCheck.appendChild(t),setTimeout(()=>{t.remove()},1e5)}function paginaSiguiente(){botones[1].classList.contains("active")?botones[2].classList.contains("active")||botones[2].click():botones[1].click()}function paginaAnterior(e){botones[2].classList.contains("active")?botones[1].click():botones[1].classList.contains("active")&&botones[0].click()}function setType(e){e.target.type="submit"}async function getContrato(e){try{const t=await fetch(e);return await t.json()}catch(e){console.log(e)}}async function modalContrato(e){e.preventDefault();const t=document.querySelector("body");t.classList.add("overlay");const a=document.createElement("div");a.classList.add("register");const o=document.createElement("div");o.classList.add("register__modal");const s=document.createElement("button");s.classList.add("register__btn-cerrar"),s.innerHTML='<i class="fas fa-times"></i>',s.onclick=cerrarModal;const i=await readLang(),n=await readJSON();let c;c="contrato-musical"===e.target.id?"http://localhost:3000/api/filmtono/c-musical":"http://localhost:3000/api/filmtono/c-artistico";const r=document.createElement("div"),l=await getContrato(c);r.innerHTML=l;const d=document.createElement("P");d.textContent=n.signature[i],d.classList.add("firma");const u=document.createElement("P");u.textContent=n.signatureInfo[i],u.classList.add("firma__info");const m=document.createElement("canvas");m.id="canvas",m.width=600,m.height=200,m.style.border="1px solid black",m.style.backgroundColor="white",m.style.margin="0 auto",m.style.display="block";const p=m.getContext("2d");p.fillStyle="white",p.strokeStyle="black",p.lineWidth=2,p.lineCap="round";let v=!1,g=0,f=0;function L(e){v=!0,e.touches?[g,f]=[e.touches[0].pageX-e.target.offsetLeft,e.touches[0].pageY-e.target.offsetTop]:[g,f]=[e.offsetX,e.offsetY]}function b(e){v&&(p.beginPath(),e.touches?(p.moveTo(g,f),p.lineTo(e.touches[0].pageX-e.target.offsetLeft,e.touches[0].pageY-e.target.offsetTop),[g,f]=[e.touches[0].pageX-e.target.offsetLeft,e.touches[0].pageY-e.target.offsetTop]):(p.moveTo(g,f),p.lineTo(e.offsetX,e.offsetY),[g,f]=[e.offsetX,e.offsetY]),p.stroke())}function h(){v=!1,p.beginPath()}m.addEventListener("mousedown",L),m.addEventListener("mousemove",b),m.addEventListener("mouseup",h),m.addEventListener("touchstart",L),m.addEventListener("touchmove",b),m.addEventListener("touchend",h);const C=document.createElement("button");C.classList.add("btn-tabs"),C.textContent="Limpiar",C.onclick=function(){p.clearRect(0,0,m.width,m.height)},o.appendChild(s),o.appendChild(r),o.appendChild(d),o.appendChild(u),o.appendChild(m),o.appendChild(C),a.appendChild(o),t.appendChild(a),datosContrato()}async function datosContrato(){console.log("datos contrato")}function cerrarModal(){const e=document.querySelector("body"),t=document.querySelector(".register");e.classList.remove("overlay"),t.remove()}
//# sourceMappingURL=perfiles.js.map
