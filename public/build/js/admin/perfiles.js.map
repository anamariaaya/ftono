{"version":3,"sources":["admin/perfiles.js"],"names":["botones","pagAnterior","pagSiguiente","afterNav","btnContrato","nombre","email","cargo","telContacto","empresa","idFiscal","direccion","terms","privacy","divCheck","btnSubmit","paisContacto","telIndex","hiddenInput","contratoMusical","confirmContrato","validarFormulario","imprimirAlerta","readLang","readJSON","checkMusical","formularioReg","addEventListener","paso","tabs","forEach","tab","e","target","dataset","cambiarSeccion","botonesPaginador","secciones","document","querySelectorAll","tabActivo","querySelector","classList","add","id","remove","textContent","onclick","validarCheck","btn","modalContrato","paginador","paginaAnterior","paginaSiguiente","preventDefault","checked","alertaCheck","inputs","Array","from","every","input","value","click","async","message","divMensaje","createElement","error","lang","alerts","appendChild","setTimeout","contains","getContrato","url","res","fetch","json","err","console","log","body","divModal","modal","btnCerrar","innerHTML","cerrarModal","divContrato","contrato","firmaTitulo","signature","firmaInfo","signatureInfo","formCanvas","canvas","width","height","style","border","backgroundColor","margin","display","ctx","getContext","fillStyle","strokeStyle","lineWidth","lineCap","isDrawing","x","y","startDrawing","touches","pageX","offsetLeft","pageY","offsetTop","offsetX","offsetY","draw","beginPath","moveTo","lineTo","stroke","stopDrawing","clearBtn","clearRect","isCanvasBlank","sendBtn","toDataURL","canvasValidation","datosContrato","paisContrato","context","Uint32Array","getImageData","data","buffer","some","color","contPais","then","respuesta","datos","translations","spa","common","name","contEmpresa","contNombre","contIdFiscal","contDireccion","contTelefono","contEmail","getElementById","src"],"mappings":"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","file":"perfiles.js","sourcesContent":["import {botones, pagAnterior, pagSiguiente, afterNav, btnContrato, nombre, email, cargo, telContacto, empresa, idFiscal, direccion, terms, privacy, divCheck, btnSubmit, paisContacto, telIndex, hiddenInput, contratoMusical, confirmContrato} from './selectores.js';\r\n// import {form} from './form.js';\r\nimport { validarFormulario, imprimirAlerta } from '../base/funciones.js';\r\nimport {readLang, readJSON} from '../base/funciones.js';\r\n// import { sellos } from './sellos.js';\r\nlet checkMusical = false;\r\n\r\nexport function formularioReg(){\r\n    cargo.addEventListener('blur', validarFormulario);\r\n    telContacto.addEventListener('blur', validarFormulario);\r\n    empresa.addEventListener('blur', validarFormulario);\r\n    idFiscal.addEventListener('blur', validarFormulario);\r\n    direccion.addEventListener('blur', validarFormulario);\r\n}\r\n\r\nlet paso = 1;\r\n\r\nexport function tabs() {   \r\n    botones.forEach(tab => {\r\n        tab.addEventListener('click', function(e) {\r\n            paso = e.target.dataset.paso;\r\n            cambiarSeccion(e);\r\n            botonesPaginador();\r\n        });\r\n    });\r\n}\r\nconst secciones = document.querySelectorAll('.tabs__section');\r\nfunction cambiarSeccion(e) {\r\n    \r\n    \r\n    const tabActivo = document.querySelector(`#paso-${paso}`);\r\n    tabActivo.classList.add('mostrar');\r\n    e.target.classList.add('active');\r\n\r\n    // Remueve la clase active de los botones\r\n    if(tabActivo.id === 'paso-1'){\r\n        botones[0].classList.add('active');\r\n        botones[1].classList.remove('active');\r\n        botones[2].classList.remove('active');\r\n        secciones[0].classList.add('mostrar');\r\n        secciones[1].classList.remove('mostrar');\r\n        secciones[2].classList.remove('mostrar');\r\n    } else if(tabActivo.id === 'paso-2'){\r\n        botones[1].classList.add('active');\r\n        botones[2].classList.remove('active');\r\n        secciones[1].classList.add('mostrar');\r\n        secciones[2].classList.remove('mostrar');\r\n        secciones[0].classList.remove('mostrar');\r\n    } else{\r\n        botones[1].classList.add('active');\r\n        botones[2].classList.add('active');\r\n        secciones[2].classList.add('mostrar');\r\n        secciones[0].classList.remove('mostrar');\r\n        secciones[1].classList.remove('mostrar');\r\n    }\r\n    // secciones.forEach(seccion => {\r\n    //     if (seccion.id !== tabActivo.id) {\r\n    //         seccion.classList.remove('mostrar');\r\n    //     }\r\n    // });      \r\n}\r\nfunction botonesPaginador(){ \r\n    switch(paso) {\r\n        case '1':\r\n            pagAnterior.classList.add('ocultar');\r\n            pagSiguiente.classList.remove('ocultar');\r\n            afterNav.classList.remove('step2');\r\n            afterNav.classList.remove('step3');\r\n            pagSiguiente.textContent = 'Siguiente \\u279f';\r\n            pagSiguiente.classList.remove('btn-tabs--disabled');\r\n            break;\r\n        case '2':\r\n            pagAnterior.classList.remove('ocultar');\r\n            pagSiguiente.classList.remove('ocultar');\r\n            afterNav.classList.add('step2');\r\n            afterNav.classList.remove('step3');\r\n            pagSiguiente.classList.remove('btn-tabs--disabled');\r\n            pagSiguiente.textContent = 'Siguiente \\u279f';\r\n            break;\r\n        case '3':\r\n            pagAnterior.classList.remove('ocultar');\r\n            pagSiguiente.textContent = 'Registrarse \\u2713';\r\n            pagSiguiente.onclick = validarCheck;\r\n            afterNav.classList.add('step3');\r\n            afterNav.classList.remove('step2');\r\n            if(btnContrato){\r\n                btnContrato.forEach(btn => {\r\n                    btn.onclick = modalContrato;\r\n                });\r\n            };\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n}\r\n\r\nexport function paginador(){\r\n    pagAnterior.addEventListener('click', paginaAnterior);\r\n    pagSiguiente.addEventListener('click',paginaSiguiente);\r\n}\r\n\r\nfunction validarCheck(e){\r\n    e.preventDefault();\r\n    if(!terms.checked){\r\n        alertaCheck('terms');\r\n    } else if(!privacy.checked){\r\n        alertaCheck('privacy');\r\n    } else if(checkMusical === false){\r\n        alertaCheck('contract');\r\n    }\r\n    else{\r\n        //comprobar que todos los inputs tengan un valor\r\n        const inputs = [cargo, telContacto, empresa, idFiscal,  direccion];\r\n        const arrayInputs = Array.from(inputs);\r\n\r\n        if(arrayInputs.every( input => input.value !== '')){\r\n            btnSubmit.click();\r\n        } else{\r\n            alertaCheck('inputs');\r\n        }\r\n        //e.target.type = 'submit';\r\n    }\r\n}\r\n\r\nasync function alertaCheck(message){\r\n    // Crea el div\r\n    const divMensaje = document.createElement('div');\r\n    divMensaje.classList.add('alerta__error');\r\n\r\n    const error = document.querySelector('.alerta__error');\r\n    if(error){\r\n        error.remove();\r\n    }\r\n    // Mensaje de error\r\n    const lang = await readLang();\r\n    const alerts = await readJSON();\r\n\r\n    divMensaje.textContent = alerts[message][lang];\r\n\r\n    // Insertar en el DOM\r\n    divCheck.appendChild(divMensaje);\r\n\r\n    // Quitar el alert despues de 3 segundos\r\n    setTimeout( () => {\r\n        divMensaje.remove();\r\n    }, 4000);\r\n}\r\n\r\nfunction paginaSiguiente(){\r\n    if(!botones[1].classList.contains('active')){\r\n        botones[1].click();\r\n    } else if(!botones[2].classList.contains('active')){\r\n        botones[2].click();\r\n    }\r\n}\r\n\r\nfunction paginaAnterior(e){\r\n    if(botones[2].classList.contains('active')){\r\n        botones[1].click();\r\n    } else if(botones[1].classList.contains('active')){\r\n        botones[0].click();\r\n    }\r\n}\r\n\r\nasync function getContrato(url){\r\n    try{\r\n        const res = await fetch(url);\r\n        const data = await res.json();\r\n        return data;        \r\n    }catch(err){\r\n        console.log(err);\r\n    }\r\n}\r\n\r\nasync function modalContrato(e){\r\n    e.preventDefault();\r\n    \r\n    const lang = await readLang();\r\n    const alerts = await readJSON();\r\n\r\n    const body = document.querySelector('body');\r\n    body.classList.add('overlay');\r\n\r\n    const divModal = document.createElement('div');\r\n    divModal.classList.add('register');\r\n\r\n    const modal = document.createElement('div');\r\n    modal.classList.add('register__modal');\r\n\r\n    const btnCerrar = document.createElement('button');\r\n    btnCerrar.classList.add('register__btn-cerrar');\r\n    btnCerrar.innerHTML = '<i class=\"fas fa-times\"></i>';\r\n    btnCerrar.onclick = cerrarModal;\r\n\r\n    let url;\r\n    if(e.target.id === 'contrato-musical'){\r\n        url = 'http://localhost:3000/api/filmtono/c-musical';\r\n    }else{\r\n        url = 'http://localhost:3000/api/filmtono/c-artistico';\r\n    }\r\n\r\n    const divContrato = document.createElement('div');\r\n\r\n    const contrato = await getContrato(url);\r\n    divContrato.innerHTML = contrato;    \r\n\r\n    const firmaTitulo = document.createElement('P');\r\n    firmaTitulo.textContent = alerts.signature[lang];\r\n    firmaTitulo.classList.add('firma');\r\n\r\n    const firmaInfo = document.createElement('P');\r\n    firmaInfo.textContent = alerts.signatureInfo[lang];\r\n    firmaInfo.classList.add('firma__info');\r\n\r\n    const formCanvas = document.createElement('form');\r\n\r\n    const canvas = document.createElement('canvas');\r\n    canvas.id = 'canvasSignature';\r\n    canvas.width = 600;\r\n    canvas.height = 200;\r\n    canvas.style.border = '1px solid black';\r\n    canvas.style.backgroundColor = 'white';\r\n    canvas.style.margin = '0 auto';\r\n    canvas.style.display = 'block';\r\n\r\n    const ctx = canvas.getContext(\"2d\");\r\n    ctx.fillStyle = \"white\";\r\n    ctx.strokeStyle = \"black\";\r\n    ctx.lineWidth = 2;\r\n    ctx.lineCap = \"round\";\r\n\r\n    let isDrawing = false;\r\n    let x = 0;\r\n    let y = 0;\r\n\r\n    canvas.addEventListener(\"mousedown\", startDrawing);\r\n    canvas.addEventListener(\"mousemove\", draw);\r\n    canvas.addEventListener(\"mouseup\", stopDrawing);\r\n    canvas.addEventListener(\"touchstart\", startDrawing);\r\n    canvas.addEventListener(\"touchmove\", draw);\r\n    canvas.addEventListener(\"touchend\", stopDrawing);\r\n\r\n    function startDrawing(e) {\r\n    isDrawing = true;\r\n        if (e.touches) {\r\n            [x, y] = [e.touches[0].pageX - e.target.offsetLeft, e.touches[0].pageY - e.target.offsetTop];\r\n        } else {\r\n            [x, y] = [e.offsetX, e.offsetY];\r\n        }\r\n    }\r\n\r\n    function draw(e) {\r\n        if (!isDrawing) return;\r\n        ctx.beginPath();\r\n        if (e.touches) {\r\n            ctx.moveTo(x, y);\r\n            ctx.lineTo(e.touches[0].pageX - e.target.offsetLeft, e.touches[0].pageY - e.target.offsetTop);\r\n            [x, y] = [e.touches[0].pageX - e.target.offsetLeft, e.touches[0].pageY - e.target.offsetTop];\r\n        } else {\r\n            ctx.moveTo(x, y);\r\n            ctx.lineTo(e.offsetX, e.offsetY);\r\n            [x, y] = [e.offsetX, e.offsetY];\r\n        }\r\n        ctx.stroke();\r\n    }\r\n    \r\n    function stopDrawing() {\r\n        isDrawing = false;\r\n        ctx.beginPath();\r\n    }      \r\n\r\n    function limpiar(){\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        canvas.isCanvasBlank = true;\r\n        imprimirAlerta('signValidation', 'error', firmaInfo);\r\n        sendBtn.classList.add('btn-tabs--disabled');\r\n     \r\n    }\r\n\r\n    const clearBtn = document.createElement('button');\r\n    clearBtn.classList.add('btn-contrato--optional');\r\n    clearBtn.textContent = alerts['clear'][lang];\r\n    clearBtn.onclick = limpiar;\r\n\r\n    hiddenInput.value = canvas.toDataURL();\r\n\r\n    const sendBtn = document.createElement('button');\r\n    sendBtn.classList.add('btn-tabs', 'btn-tabs--disabled');\r\n    sendBtn.textContent = 'Guardar';\r\n    sendBtn.onclick = canvasValidation(canvas, firmaInfo, sendBtn);\r\n    \r\n    //add event listener to see if the canvas is empty\r\n\r\n    formCanvas.appendChild(canvas);\r\n\r\n    modal.appendChild(btnCerrar);\r\n    modal.appendChild(divContrato);\r\n    modal.appendChild(firmaTitulo);\r\n    modal.appendChild(firmaInfo);\r\n    modal.appendChild(formCanvas);\r\n    modal.appendChild(clearBtn);\r\n    modal.appendChild(sendBtn);\r\n\r\n    divModal.appendChild(modal);\r\n    body.appendChild(divModal);\r\n\r\n\r\n    datosContrato(canvas);\r\n    paisContrato();\r\n\r\n}\r\n\r\nasync function canvasValidation(canvas, firmaInfo, sendBtn){\r\n    const lang = await readLang();\r\n    const alerts = await readJSON();\r\n\r\n    canvas.addEventListener('mouseup', () => {\r\n        if (!isCanvasBlank(canvas)) {\r\n            sendBtn.classList.remove('btn-tabs--disabled');\r\n            sendBtn.onclick = cerrarModal;\r\n            contratoMusical.style.display = 'none';\r\n            contratoMusical.remove();\r\n            confirmContrato.style.display = 'block';\r\n            confirmContrato.textContent = alerts['confirm'][lang];\r\n            checkMusical = true;\r\n        }\r\n    });\r\n}\r\n\r\nfunction isCanvasBlank(canvas) {\r\n    const context = canvas.getContext('2d');\r\n    const pixelBuffer = new Uint32Array(\r\n      context.getImageData(0, 0, canvas.width, canvas.height).data.buffer\r\n    );\r\n    return !pixelBuffer.some(color => color !== 0);\r\n}\r\n\r\nasync function paisContrato(){\r\n    if(paisContacto.value !== '0'){\r\n        const lang = await readLang();\r\n        const contPais = document.querySelector('#contract-pais');\r\n        const url = `https://restcountries.com/v3.1/alpha/${paisContacto.value}`;\r\n        fetch(url)\r\n            .then(respuesta => respuesta.json())\r\n            .then(datos => {\r\n                if(lang === 'es'){\r\n                    contPais.textContent = datos[0].translations.spa.common;\r\n                }else{\r\n                    contPais.textContent = datos[0].name.common;\r\n                }\r\n\r\n            });\r\n    }\r\n}\r\n\r\nfunction datosContrato(canvas){\r\n    const contEmpresa = document.querySelector('#contract-empresa');\r\n    const contNombre = document.querySelector('#contract-nombre');\r\n    const contIdFiscal = document.querySelector('#contract-id-fiscal');\r\n    const contDireccion = document.querySelector('#contract-direccion');\r\n    const contTelefono = document.querySelector('#contract-telefono');\r\n    const contEmail = document.querySelector('#contract-email');\r\n    const signature = document.getElementById('signature-img');\r\n\r\n    contEmpresa.textContent = empresa.value;    \r\n    contNombre.textContent = nombre.value;\r\n    contIdFiscal.textContent = idFiscal.value;\r\n    contDireccion.textContent = direccion.value;\r\n    contTelefono.textContent = telIndex.value + telContacto.value;\r\n    contEmail.textContent = email.value;    \r\n\r\n    canvas.addEventListener('click', () => {     \r\n        signature.src = canvas.toDataURL();\r\n        signature.classList.remove('no-display');\r\n    });\r\n}\r\n\r\nfunction cerrarModal(){\r\n    const body = document.querySelector('body');\r\n    const modal = document.querySelector('.register');\r\n    body.classList.remove('overlay');\r\n    modal.remove();\r\n}"]}