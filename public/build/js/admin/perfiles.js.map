{"version":3,"sources":["admin/perfiles.js"],"names":["botones","pagAnterior","pagSiguiente","afterNav","btnContrato","nombre","email","cargo","telContacto","empresa","idFiscal","direccion","terms","privacy","divCheck","btnSubmit","paisContacto","telIndex","hiddenMusic","hiddenArtistic","contratoMusical","contratoArtistico","confirmContrato","confirmContratoArt","validarFormulario","imprimirAlerta","readLang","readJSON","checkMusical","paso","tabs","forEach","tab","addEventListener","e","target","dataset","cambiarSeccion","botonesPaginador","secciones","document","querySelectorAll","tabActivo","querySelector","classList","add","id","remove","async","lang","alerts","textContent","onclick","validarCheck","btn","modalContrato","paginador","paginaAnterior","paginaSiguiente","contains","click","formularioReg","preventDefault","checked","alertaCheck","inputs","Array","from","every","input","value","message","divMensaje","createElement","error","appendChild","setTimeout","getContrato","url","res","fetch","json","err","console","log","body","divModal","modal","btnCerrar","innerHTML","cerrarModal","window","location","origin","divContrato","contrato","firmaTitulo","signature","firmaInfo","signatureInfo","formCanvas","canvas","innerWidth","width","height","style","border","backgroundColor","margin","display","ctx","getContext","fillStyle","strokeStyle","lineWidth","lineCap","isDrawing","x","y","startDrawing","touches","overflow","pageX","offsetLeft","pageY","offsetTop","offsetX","offsetY","draw","beginPath","moveTo","lineTo","stroke","stopDrawing","clearBtn","clearRect","isCanvasBlank","sendBtn","canvasValidation","datosContrato","paisContrato","toDataURL","context","Uint32Array","getImageData","data","buffer","some","color","paisFirmas","contPais","then","respuesta","datos","translations","spa","common","name","contEmpresa","contNombre","contIdFiscal","contDireccion","contTelefono","contEmail","getElementById","src"],"mappings":"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","file":"perfiles.js","sourcesContent":["//Módulos importados\r\nimport { botones, pagAnterior, pagSiguiente, afterNav, btnContrato, nombre, email, cargo, telContacto, empresa, idFiscal, direccion, terms, privacy, divCheck, btnSubmit, paisContacto, telIndex, hiddenMusic, hiddenArtistic, contratoMusical, contratoArtistico, confirmContrato, confirmContratoArt} from './selectores.js';\r\nimport { validarFormulario, imprimirAlerta } from '../base/funciones.js';\r\nimport {readLang, readJSON} from '../base/funciones.js';\r\n\r\n//Variables globales\r\nlet checkMusical = false;\r\nlet paso = 1;\r\n\r\n//Funciones para el registro de empresa\r\n//*Paginador y tabs\r\n\r\nexport function tabs() {   \r\n    botones.forEach(tab => {\r\n        tab.addEventListener('click', function(e) {\r\n            paso = e.target.dataset.paso;\r\n            cambiarSeccion(e);\r\n            botonesPaginador();\r\n        });\r\n    });\r\n}\r\nconst secciones = document.querySelectorAll('.tabs__section');\r\nfunction cambiarSeccion(e) {\r\n    \r\n    \r\n    const tabActivo = document.querySelector(`#paso-${paso}`);\r\n    tabActivo.classList.add('mostrar');\r\n    e.target.classList.add('active');\r\n\r\n    // Remueve la clase active de los botones\r\n    if(tabActivo.id === 'paso-1'){\r\n        botones[0].classList.add('active');\r\n        botones[1].classList.remove('active');\r\n        botones[2].classList.remove('active');\r\n        secciones[0].classList.add('mostrar');\r\n        secciones[1].classList.remove('mostrar');\r\n        secciones[2].classList.remove('mostrar');\r\n    } else if(tabActivo.id === 'paso-2'){\r\n        botones[1].classList.add('active');\r\n        botones[2].classList.remove('active');\r\n        secciones[1].classList.add('mostrar');\r\n        secciones[2].classList.remove('mostrar');\r\n        secciones[0].classList.remove('mostrar');\r\n    } else{\r\n        botones[1].classList.add('active');\r\n        botones[2].classList.add('active');\r\n        secciones[2].classList.add('mostrar');\r\n        secciones[0].classList.remove('mostrar');\r\n        secciones[1].classList.remove('mostrar');\r\n    }\r\n    // secciones.forEach(seccion => {\r\n    //     if (seccion.id !== tabActivo.id) {\r\n    //         seccion.classList.remove('mostrar');\r\n    //     }\r\n    // });      \r\n}\r\nasync function botonesPaginador(){ \r\n    const lang = await readLang();\r\n    const alerts = await readJSON();\r\n\r\n    switch(paso) {\r\n        case '1':\r\n            pagAnterior.classList.add('ocultar');\r\n            pagSiguiente.classList.remove('ocultar');\r\n            afterNav.classList.remove('step2');\r\n            afterNav.classList.remove('step3');\r\n            pagSiguiente.classList.remove('btn-tabs--disabled');\r\n            break;\r\n        case '2':\r\n            pagAnterior.classList.remove('ocultar');\r\n            pagSiguiente.classList.remove('ocultar');\r\n            afterNav.classList.add('step2');\r\n            afterNav.classList.remove('step3');\r\n            pagSiguiente.classList.remove('btn-tabs--disabled');\r\n            break;\r\n        case '3':\r\n            pagAnterior.classList.remove('ocultar');\r\n            pagSiguiente.textContent = alerts['register'][lang]+' \\u2713';\r\n            pagSiguiente.onclick = validarCheck;\r\n            afterNav.classList.add('step3');\r\n            afterNav.classList.remove('step2');\r\n            if(btnContrato){\r\n                btnContrato.forEach(btn => {\r\n                    btn.onclick = modalContrato;\r\n                });\r\n            };\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n}\r\n\r\nexport function paginador(){\r\n    pagAnterior.addEventListener('click', paginaAnterior);\r\n    pagSiguiente.addEventListener('click',paginaSiguiente);\r\n}\r\n\r\nfunction paginaSiguiente(){\r\n    if(!botones[1].classList.contains('active')){\r\n        botones[1].click();\r\n    } else if(!botones[2].classList.contains('active')){\r\n        botones[2].click();\r\n    }\r\n}\r\n\r\nfunction paginaAnterior(e){\r\n    if(botones[2].classList.contains('active')){\r\n        botones[1].click();\r\n    } else if(botones[1].classList.contains('active')){\r\n        botones[0].click();\r\n    }\r\n}\r\n\r\n//Validación de formulario de registro de empresa\r\nexport function formularioReg(){\r\n    cargo.addEventListener('blur', validarFormulario);\r\n    telContacto.addEventListener('blur', validarFormulario);\r\n    empresa.addEventListener('blur', validarFormulario);\r\n    idFiscal.addEventListener('blur', validarFormulario);\r\n    direccion.addEventListener('blur', validarFormulario);\r\n}\r\n\r\nfunction validarCheck(e){\r\n    e.preventDefault();\r\n    if(!terms.checked){\r\n        alertaCheck('terms');\r\n    } else if(!privacy.checked){\r\n        alertaCheck('privacy');\r\n    } else if(checkMusical === false){\r\n        alertaCheck('contract');\r\n    }\r\n    else{\r\n        //comprobar que todos los inputs tengan un valor\r\n        const inputs = [cargo, telContacto, empresa, idFiscal,  direccion];\r\n        const arrayInputs = Array.from(inputs);\r\n\r\n        if(arrayInputs.every( input => input.value !== '')){\r\n            btnSubmit.click();\r\n        } else{\r\n            alertaCheck('inputs');\r\n        }\r\n        //e.target.type = 'submit';\r\n    }\r\n}\r\n\r\nasync function alertaCheck(message){\r\n    // Crea el div\r\n    const divMensaje = document.createElement('div');\r\n    divMensaje.classList.add('alerta__error');\r\n\r\n    const error = document.querySelector('.alerta__error');\r\n    if(error){\r\n        error.remove();\r\n    }\r\n    // Mensaje de error\r\n    const lang = await readLang();\r\n    const alerts = await readJSON();\r\n\r\n    divMensaje.textContent = alerts[message][lang];\r\n\r\n    // Insertar en el DOM\r\n    divCheck.appendChild(divMensaje);\r\n\r\n    // Quitar el alert despues de 3 segundos\r\n    setTimeout( () => {\r\n        divMensaje.remove();\r\n    }, 4000);\r\n}\r\n\r\n//Contrato para modal\r\nasync function getContrato(url){\r\n    try{\r\n        const res = await fetch(url);\r\n        const data = await res.json();\r\n        return data;        \r\n    }catch(err){\r\n        console.log(err);\r\n    }\r\n}\r\n\r\nasync function modalContrato(e){\r\n    e.preventDefault();\r\n        \r\n    const lang = await readLang();\r\n    const alerts = await readJSON();\r\n\r\n    const body = document.querySelector('body');\r\n    body.classList.add('overlay');\r\n\r\n    const divModal = document.createElement('div');\r\n    divModal.classList.add('register');\r\n\r\n    const modal = document.createElement('div');\r\n    modal.classList.add('register__modal');\r\n\r\n    const btnCerrar = document.createElement('button');\r\n    btnCerrar.classList.add('register__btn-cerrar');\r\n    btnCerrar.innerHTML = '<i class=\"fas fa-times\"></i>';\r\n    btnCerrar.onclick = cerrarModal;\r\n\r\n    let url;\r\n    if(e.target.id === 'contrato-musical'){\r\n        url = window.location.origin+'/api/filmtono/c-musical';\r\n    }else{\r\n        url = window.location.origin+'/api/filmtono/c-artistico';\r\n    }\r\n\r\n    const divContrato = document.createElement('div');\r\n\r\n    const contrato = await getContrato(url);\r\n    divContrato.innerHTML = contrato;   \r\n\r\n    const firmaTitulo = document.createElement('P');\r\n    firmaTitulo.textContent = alerts.signature[lang];\r\n    firmaTitulo.classList.add('firma');\r\n\r\n    const firmaInfo = document.createElement('P');\r\n    firmaInfo.textContent = alerts.signatureInfo[lang];\r\n    firmaInfo.classList.add('firma__info');\r\n\r\n    const formCanvas = document.createElement('form');\r\n\r\n    const canvas = document.createElement('canvas');\r\n    //find the screen width\r\n    const width = window.innerWidth;\r\n    //set the canvas width and height\r\n    if(width < 600){\r\n        canvas.width = 300;\r\n        canvas.height = 150;\r\n        }else{\r\n        canvas.width = 600;\r\n        canvas.height = 200;\r\n    }\r\n    canvas.style.border = '1px solid black';\r\n    canvas.style.backgroundColor = 'white';\r\n    canvas.style.margin = '0 auto';\r\n    canvas.style.display = 'block';\r\n    if(e.target.id === 'contrato-musical'){\r\n        canvas.id = 'canvas-musical';\r\n    }else{\r\n        canvas.id = 'canvas-artistico';\r\n    }\r\n\r\n    const ctx = canvas.getContext(\"2d\");\r\n    ctx.fillStyle = \"white\";\r\n    ctx.strokeStyle = \"black\";\r\n    ctx.lineWidth = 2;\r\n    ctx.lineCap = \"round\";\r\n\r\n    let isDrawing = false;\r\n    let x = 0;\r\n    let y = 0;\r\n\r\n    canvas.addEventListener(\"mousedown\", startDrawing);\r\n    canvas.addEventListener(\"mousemove\", draw);\r\n    canvas.addEventListener(\"mouseup\", stopDrawing);\r\n    canvas.addEventListener(\"touchstart\", startDrawing);\r\n    canvas.addEventListener(\"touchmove\", draw);\r\n    canvas.addEventListener(\"touchend\", stopDrawing);\r\n\r\n    function startDrawing(e) {\r\n    isDrawing = true;\r\n        if (e.touches) {\r\n            body.style.overflow = 'hidden';\r\n            [x, y] = [e.touches[0].pageX - e.target.offsetLeft, e.touches[0].pageY - e.target.offsetTop];\r\n        } else {\r\n            [x, y] = [e.offsetX, e.offsetY];\r\n        }\r\n    }\r\n\r\n    //create a function for drawing on the canvas with the finger\r\n   \r\n    function draw(e) {\r\n        if (!isDrawing) return;\r\n        ctx.beginPath();\r\n        if (e.touches) {\r\n            ctx.moveTo(x, y);\r\n            ctx.lineTo(e.touches[0].pageX - e.target.offsetLeft, e.touches[0].pageY - e.target.offsetTop);\r\n            [x, y] = [e.touches[0].pageX - e.target.offsetLeft, e.touches[0].pageY - e.target.offsetTop];\r\n        } else {\r\n            ctx.moveTo(x, y);\r\n            ctx.lineTo(e.offsetX, e.offsetY);\r\n            [x, y] = [e.offsetX, e.offsetY];\r\n        }\r\n        ctx.stroke();\r\n    }\r\n    \r\n    function stopDrawing() {\r\n        body.style.overflow = 'auto';\r\n        isDrawing = false;\r\n        ctx.beginPath();\r\n    }      \r\n\r\n    function limpiar(){\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        canvas.isCanvasBlank = true;\r\n        if(canvas.id === 'canvas-musical'){\r\n            imprimirAlerta('signValidation', 'error', firmaInfo);\r\n            sendBtn.classList.add('btn-tabs--disabled');\r\n        }\r\n    }\r\n\r\n    const clearBtn = document.createElement('button');\r\n    clearBtn.classList.add('btn-contrato--optional');\r\n    clearBtn.textContent = alerts['clear'][lang];\r\n    clearBtn.onclick = limpiar;\r\n\r\n\r\n    const sendBtn = document.createElement('button');\r\n\r\n    if(canvas.id === 'canvas-musical'){\r\n        sendBtn.classList.add('btn-tabs', 'btn-tabs--disabled');\r\n    }else{\r\n        sendBtn.classList.add('btn-tabs');\r\n    }\r\n\r\n    sendBtn.textContent = 'Guardar';\r\n    sendBtn.onclick = canvasValidation(canvas, sendBtn);\r\n    \r\n    //add event listener to see if the canvas is empty\r\n\r\n    formCanvas.appendChild(canvas);\r\n\r\n    modal.appendChild(btnCerrar);\r\n    modal.appendChild(divContrato);\r\n    modal.appendChild(firmaTitulo);\r\n    modal.appendChild(firmaInfo);\r\n    modal.appendChild(formCanvas);\r\n    modal.appendChild(clearBtn);\r\n    modal.appendChild(sendBtn);\r\n\r\n    divModal.appendChild(modal);\r\n    body.appendChild(divModal);\r\n\r\n\r\n    datosContrato(canvas);\r\n    paisContrato();\r\n\r\n}\r\n\r\nasync function canvasValidation(canvas, sendBtn){\r\n    const lang = await readLang();\r\n    const alerts = await readJSON();    \r\n\r\n    canvas.addEventListener('mouseup', () => {\r\n        if (!isCanvasBlank(canvas)) {\r\n            if(canvas.id==='canvas-musical'){\r\n                sendBtn.classList.remove('btn-tabs--disabled');\r\n                contratoMusical.style.display = 'none';\r\n                //contratoMusical.remove();\r\n                confirmContrato.style.display = 'block';\r\n                confirmContrato.textContent = alerts['confirm'][lang];\r\n                checkMusical = true;\r\n                hiddenMusic.value = canvas.toDataURL();\r\n            }\r\n            else{                \r\n                contratoArtistico.style.display = 'none';\r\n                confirmContratoArt.style.display = 'block';\r\n                confirmContratoArt.textContent = alerts['confirm'][lang];\r\n                hiddenArtistic.value = canvas.toDataURL();\r\n            }\r\n            sendBtn.onclick = cerrarModal;\r\n        }\r\n    });\r\n}\r\n\r\nfunction isCanvasBlank(canvas) {\r\n    const context = canvas.getContext('2d');\r\n    const pixelBuffer = new Uint32Array(\r\n      context.getImageData(0, 0, canvas.width, canvas.height).data.buffer\r\n    );\r\n    return !pixelBuffer.some(color => color !== 0);\r\n}\r\n\r\nasync function paisContrato(){\r\n    if(paisContacto.value !== '0'){\r\n        const paisFirmas = document.querySelector('#pais_contacto_name');\r\n        const lang = await readLang();\r\n        const contPais = document.querySelector('#contract-pais');\r\n        const url = `https://restcountries.com/v3.1/alpha/${paisContacto.value}`;\r\n        fetch(url)\r\n            .then(respuesta => respuesta.json())\r\n            .then(datos => {\r\n                if(lang === 'es'){\r\n                    contPais.textContent = datos[0].translations.spa.common;\r\n                    paisFirmas.value = datos[0].translations.spa.common;\r\n                }else{\r\n                    contPais.textContent = datos[0].name.common;\r\n                    paisFirmas.value = datos[0].name.common;\r\n                }\r\n\r\n            });\r\n    }\r\n}\r\n\r\nfunction datosContrato(canvas){\r\n    const gridFirmas = document.querySelector('.grid-firmas');\r\n    gridFirmas.classList.remove('no-display');\r\n\r\n    const contEmpresa = document.querySelector('#contract-empresa');\r\n    const contNombre = document.querySelector('#contract-nombre');\r\n    const contIdFiscal = document.querySelector('#contract-id-fiscal');\r\n    const contDireccion = document.querySelector('#contract-direccion');\r\n    const contTelefono = document.querySelector('#contract-telefono');\r\n    const contEmail = document.querySelector('#contract-email');\r\n    const signature = document.getElementById('signature-img');\r\n\r\n    contEmpresa.textContent = empresa.value;    \r\n    contNombre.textContent = nombre.value;\r\n    contIdFiscal.textContent = idFiscal.value;\r\n    contDireccion.textContent = direccion.value;\r\n    contTelefono.textContent = telIndex.value + telContacto.value;\r\n    contEmail.textContent = email.value;    \r\n\r\n    canvas.addEventListener('click', () => {     \r\n        signature.src = canvas.toDataURL();\r\n        signature.classList.remove('no-display');\r\n    });\r\n}\r\n\r\nfunction cerrarModal(){\r\n    const body = document.querySelector('body');\r\n    const modal = document.querySelector('.register');\r\n    body.classList.remove('overlay');\r\n    modal.remove();\r\n}"]}