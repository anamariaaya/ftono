{"version":3,"sources":["UI/categories.js"],"names":["categoriasInput","gridCategorias","readLang","readJSON","eliminarItem","normalizeText","async","consultaCategorias","resultado","fetch","window","location","origin","mostrarCategorias","json","error","console","log","datos","lang","forEach","categoria","id","categoria_en","categoria_es","categoriaLink","document","createElement","classList","add","href","categoriaTitle","textContent","card","appendChild","filtraCategorias","addEventListener","e","texto","target","value","querySelectorAll","indexOf","style","display","marginRight","columnGap"],"mappings":"OAASA,gBAAiBC,mBAAsB,yBACvCC,SAAUC,SAAUC,aAAcC,kBAAqB,8BAEzDC,eAAeC,qBAClB,IACI,MAAMC,QAAkBC,MAAMC,OAAOC,SAASC,OAAO,0BAErDC,wBADoBL,EAAUM,QAGjC,MAAMC,GACHC,QAAQC,IAAIF,WAGbT,eAAeO,kBAAkBK,GAChC,MAAMC,QAAajB,iBACEC,WACrBe,EAAME,QAAQC,IACN,MAAMC,GAACA,EAAEC,aAAEA,EAAYC,aAAEA,GAAgBH,EAGnCI,EAAgBC,SAASC,cAAc,KAC7CF,EAAcG,UAAUC,IAAI,uBACE,WAA3BR,EAAUE,aACTE,EAAcK,KAAO,mBAErBL,EAAcK,KAAO,gBAAgBR,EAAG,SAASC,EAIrD,MAAMQ,EAAiBL,SAASC,cAAc,KAC9CI,EAAeH,UAAUC,IAAI,uBAErBE,EAAeC,YADZ,MAARb,EACkCK,EAEAD,EAKrC,MAAMU,EAAOP,SAASC,cAAc,OACpCM,EAAKL,UAAUC,IAAI,sBAAuB,eAG1CJ,EAAcS,YAAYH,GAE1BE,EAAKC,YAAYT,GAEjBxB,eAAeiC,YAAYD,KAEnCE,mBAGR,SAASA,mBACDnC,gBAAgBoC,iBAAiB,QAASC,IAClC,MAAMC,EAAQjC,cAAcgC,EAAEE,OAAOC,OACvBd,SAASe,iBAAiB,gBAElCrB,QAAQa,KAEgC,IADf5B,cAAc4B,EAAKD,aACxBU,QAAQJ,IAClBL,EAAKU,MAAMC,QAAU,OACrBX,EAAKU,MAAME,YAAc,OACzB5C,eAAe0C,MAAMG,UAAY,KAEjCb,EAAKU,MAAMC,QAAU","file":"categories.js","sourcesContent":["import { categoriasInput, gridCategorias } from './selectores.js';\r\nimport { readLang, readJSON, eliminarItem, normalizeText } from '../base/funciones.js';\r\n\r\nexport async function consultaCategorias(){\r\n    try{\r\n        const resultado = await fetch(window.location.origin+'/api/public/categories');\r\n        const datos = await resultado.json();\r\n        mostrarCategorias(datos);\r\n\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\nexport async function mostrarCategorias(datos){\r\n        const lang = await readLang();\r\n        const alerts = await readJSON();\r\n        datos.forEach(categoria => {\r\n                const {id, categoria_en, categoria_es} = categoria;\r\n\r\n                //generar el link para la categoria\r\n                const categoriaLink = document.createElement('A');\r\n                categoriaLink.classList.add('p-cards__grid__link');\r\n                if(categoria.categoria_en === 'genres'){\r\n                    categoriaLink.href = '/category/genres';\r\n                } else{\r\n                    categoriaLink.href = '/category?id='+id+'&name='+categoria_en;\r\n                }\r\n\r\n                //generar la etiqueta para el tipo de usuario\r\n                const categoriaTitle = document.createElement('P');\r\n                categoriaTitle.classList.add('p-cards__grid__text');\r\n                if(lang == 'es'){\r\n                        categoriaTitle.textContent = categoria_es;\r\n                }else{\r\n                        categoriaTitle.textContent = categoria_en;\r\n                }\r\n                \r\n\r\n                //Generar el contenedor de la información del usuario\r\n                const card = document.createElement('DIV');\r\n                card.classList.add('p-cards__grid__item', 'card-public');\r\n\r\n                //agregar la información al contenedor\r\n                categoriaLink.appendChild(categoriaTitle);\r\n                //agregar el link contenedor a la tarjeta\r\n                card.appendChild(categoriaLink);\r\n                //agregar el contenedor de la información al grid\r\n                gridCategorias.appendChild(card);\r\n        });\r\n        filtraCategorias();\r\n}\r\n\r\nfunction filtraCategorias(){\r\n        categoriasInput.addEventListener('input', e => {\r\n                const texto = normalizeText(e.target.value);\r\n                const cards = document.querySelectorAll('.card-public');\r\n\r\n                cards.forEach(card => {\r\n                        const categoriaTitle = normalizeText(card.textContent);\r\n                        if(categoriaTitle.indexOf(texto) !== -1){\r\n                                card.style.display = 'flex';\r\n                                card.style.marginRight = '2rem';\r\n                                gridCategorias.style.columnGap = '0';\r\n                        }else{\r\n                                card.style.display = 'none';\r\n                        }\r\n                });\r\n        }); \r\n}"]}