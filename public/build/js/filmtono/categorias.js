import{categoriasInput,gridCategorias}from"./selectores.js";import{readLang,readJSON,eliminarItem,normalizeText}from"../base/funciones.js";export async function consultaCategorias(){try{const e=await fetch(window.location.origin+"/api/filmtono/categories");mostrarCategorias(await e.json())}catch(e){console.log(e)}}export async function mostrarCategorias(e){const t=await readLang();await readJSON();e.forEach(e=>{const{id:a,categoria_en:n,categoria_es:i}=e,o=document.createElement("A");o.classList.add("cards__link"),"genres"===e.categoria_en?o.href="/filmtono/genres":o.href="/filmtono/categories/keywords?id="+a+"&category="+n;const s=document.createElement("H3");s.classList.add("card__info--title"),s.textContent="es"==t?i:n;const c=document.createElement("A");c.classList.add("btn-update"),c.href="/filmtono/categories/edit?id="+a;const r=document.createElement("I");r.classList.add("fa-solid","fa-pencil","no-click"),c.appendChild(r);const d=document.createElement("BUTTON");d.classList.add("btn-delete"),d.value=a,d.dataset.role="filmtono",d.dataset.item="categories",d.onclick=eliminarItem;const l=document.createElement("I");l.classList.add("fa-solid","fa-trash-can","no-click"),d.appendChild(l),d.onclick=eliminarItem;const m=document.createElement("DIV");m.classList.add("card__acciones"),m.appendChild(c),"genres"!==e.categoria_en&&m.appendChild(d);const g=document.createElement("DIV");g.classList.add("card"),o.appendChild(s),o.appendChild(m),g.appendChild(o),gridCategorias.appendChild(g)}),filtraCategorias()}function filtraCategorias(){categoriasInput.addEventListener("input",e=>{const t=normalizeText(e.target.value);document.querySelectorAll(".card").forEach(e=>{-1!==normalizeText(e.textContent).indexOf(t)?(e.style.display="flex",e.style.marginRight="2rem",gridCategorias.style.columnGap="0"):e.style.display="none"})})}
//# sourceMappingURL=categorias.js.map
