{"version":3,"sources":["filmtono/labels.js"],"names":["gridLabels","labelsInput","readLang","readJSON","eliminarItem","normalizeText","async","consultaLabels","resultado","fetch","window","location","origin","mostrarLabels","json","error","console","log","datos","lang","alerts","forEach","userLabel","labelId","labelName","labelDate","userId","userName","companyId","companyName","musicType","cardLink","document","createElement","classList","add","href","cardLabel","cardInfo","typeLabel","textContent","nameInfo","labelTitle","labelNameInfo","appendChild","dateInfo","dateTitle","dateLabel","dateFormated","Date","toLocaleDateString","year","month","day","companyInfo","companyTitle","companyNameInfo","userInfo","userTitle","userNameInfo","userLink","iconUser","cardActions","btnEliminar","id","value","dataset","item","role","onclick","iconEliminar","filtrarLabels","addEventListener","e","texto","target","querySelectorAll","card","indexOf","style","display","marginRight","columnGap"],"mappings":"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","file":"labels.js","sourcesContent":["import {gridLabels, labelsInput} from './selectores.js';\r\nimport {readLang, readJSON, eliminarItem, normalizeText} from '../base/funciones.js';\r\nexport async function consultaLabels(){\r\n    try{\r\n        const resultado = await fetch(window.location.origin+'/api/filmtono/labels');\r\n        const datos = await resultado.json();\r\n       mostrarLabels(datos);\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nasync function mostrarLabels(datos){\r\n    const lang = await readLang();\r\n    const alerts = await readJSON();\r\n    datos.forEach(userLabel => {\r\n        //extract the type of contract from the name of the file nombre_doc\r\n        const{labelId, labelName, labelDate, userId, userName, companyId, companyName, musicType} = userLabel;\r\n\r\n        const cardLink = document.createElement('a');\r\n        cardLink.classList.add('cards__link');\r\n        cardLink.href = '/filmtono/labels/current?id='+labelId;\r\n\r\n        //Create the info section\r\n        const cardLabel = document.createElement('div');\r\n        cardLabel.classList.add('cards__card');\r\n\r\n        const cardInfo = document.createElement('div');\r\n        cardInfo.classList.add('cards__info');\r\n\r\n\r\n        const typeLabel = document.createElement('H3');\r\n        typeLabel.classList.add('card__title');\r\n        if(musicType === '1'){\r\n            typeLabel.textContent = alerts['aggregator'][lang];\r\n        } else if(musicType === '2'){\r\n            typeLabel.textContent = alerts['publisher'][lang];\r\n        } else {\r\n            typeLabel.textContent = alerts['label'][lang];\r\n        }\r\n\r\n        const nameInfo = document.createElement('div');\r\n        nameInfo.classList.add('cards__info--div');\r\n\r\n        const labelTitle = document.createElement('p');\r\n        labelTitle.textContent = alerts['label-name'][lang]+':';\r\n        labelTitle.classList.add('cards__text', 'cards__text--span');\r\n\r\n        const labelNameInfo = document.createElement('p');\r\n        labelNameInfo.textContent = labelName;\r\n        labelNameInfo.classList.add('cards__text');\r\n\r\n        nameInfo.appendChild(labelTitle);\r\n        nameInfo.appendChild(labelNameInfo);\r\n\r\n        const dateInfo = document.createElement('div');\r\n        dateInfo.classList.add('cards__info--div');\r\n\r\n        const dateTitle = document.createElement('p');\r\n        dateTitle.textContent = alerts['label-creation'][lang]+':';\r\n        dateTitle.classList.add('cards__text', 'cards__text--span');\r\n\r\n        const dateLabel = document.createElement('p');\r\n        const date = new Date(labelDate);\r\n        const options = {year: 'numeric', month: 'short', day: 'numeric'};\r\n        const dateFormated = date.toLocaleDateString(lang, options);\r\n        dateLabel.textContent = dateFormated;\r\n        dateLabel.classList.add('cards__text');\r\n\r\n        dateInfo.appendChild(dateTitle);\r\n        dateInfo.appendChild(dateLabel);\r\n\r\n        const companyInfo = document.createElement('div');\r\n        companyInfo.classList.add('cards__info--div');\r\n\r\n        const companyTitle = document.createElement('p');\r\n        companyTitle.textContent = alerts['company'][lang]+':';\r\n        companyTitle.classList.add('cards__text', 'cards__text--span');\r\n\r\n        const companyNameInfo = document.createElement('p');\r\n        companyNameInfo.textContent = companyName;\r\n        companyNameInfo.classList.add('cards__text');\r\n\r\n        companyInfo.appendChild(companyTitle);\r\n        companyInfo.appendChild(companyNameInfo);\r\n\r\n        const userInfo = document.createElement('div');\r\n        userInfo.classList.add('cards__info--div');\r\n\r\n        const userTitle = document.createElement('p');\r\n        userTitle.textContent = alerts['user'][lang]+':';\r\n        userTitle.classList.add('cards__text', 'cards__text--span');\r\n\r\n        const userNameInfo = document.createElement('p');\r\n        userNameInfo.textContent = userName;\r\n        userNameInfo.classList.add('cards__text');\r\n\r\n        const userLink = document.createElement('a');\r\n        userLink.classList.add('btn-view');\r\n        userLink.textContent = alerts['see-user'][lang];\r\n        userLink.href = `/filmtono/users/current?id=${userId}`;\r\n\r\n        const iconUser = document.createElement('i');\r\n        iconUser.classList.add('fa-solid', 'fa-person');\r\n\r\n        userLink.appendChild(iconUser);\r\n\r\n        userInfo.appendChild(userTitle);\r\n        userInfo.appendChild(userNameInfo);\r\n\r\n        //Create the actions section\r\n        const cardActions = document.createElement('div');\r\n        cardActions.classList.add('cards__actions');\r\n\r\n        const btnEliminar = document.createElement('button');\r\n        btnEliminar.classList.add('btn-delete');\r\n        btnEliminar.id = 'eliminar';\r\n        btnEliminar.value = labelId;\r\n        btnEliminar.dataset.item = 'labels';\r\n        btnEliminar.dataset.role = 'filmtono';\r\n        btnEliminar.onclick = eliminarItem;\r\n\r\n        const iconEliminar = document.createElement('i');\r\n        iconEliminar.classList.add('fa-solid', 'fa-trash-can', 'no-click');\r\n\r\n        btnEliminar.appendChild(iconEliminar);\r\n        cardActions.appendChild(btnEliminar);\r\n\r\n        cardInfo.appendChild(typeLabel);\r\n        cardInfo.appendChild(nameInfo);\r\n        cardInfo.appendChild(dateInfo);\r\n        cardInfo.appendChild(companyInfo);\r\n        cardInfo.appendChild(userInfo);\r\n        cardInfo.appendChild(userLink);\r\n\r\n        cardLink.appendChild(cardInfo);\r\n        cardLink.appendChild(cardActions);\r\n\r\n        cardLabel.appendChild(cardLink);\r\n        gridLabels.appendChild(cardLabel);\r\n    });\r\n    filtrarLabels();\r\n}\r\n\r\nfunction filtrarLabels(){\r\n    labelsInput.addEventListener('input', e => {\r\n        const texto = normalizeText(e.target.value);\r\n        const cards = document.querySelectorAll('.cards__card');\r\n\r\n        cards.forEach(card => {\r\n            const nombre = normalizeText(card.textContent);\r\n            if(nombre.indexOf(texto) !== -1){\r\n                card.style.display = 'flex';\r\n                card.style.marginRight = '2rem';\r\n                gridLabels.style.columnGap = '0';\r\n            }else{\r\n                card.style.display = 'none';\r\n            }\r\n        });\r\n    }); \r\n}"]}