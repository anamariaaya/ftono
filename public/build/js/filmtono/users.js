import{gridUsuarios}from"./selectores.js";import{readLang,readJSON,eliminarItem,normalizeText}from"../base/funciones.js";export async function consultaUsuarios(){try{const e=await fetch(window.location.origin+"/api/filmtono/users");mostrarUsuarios(await e.json())}catch(e){console.log(e)}}export async function mostrarUsuarios(e){const t=await readLang(),n=await readJSON();e.forEach(e=>{const{id:a,nombre:o,apellido:s,email:i,confirmado:d,perfil:c,nivel:l,tipo_es:r,tipo_en:m,empresa:p}=e,u=document.createElement("H3");u.classList.add("card__title"),u.textContent=null!=l?"es"===t?r:m:"Admin";const f=document.createElement("P");f.classList.add("card__info--title"),f.textContent=p;const h=document.createElement("P");h.classList.add("card__info"),h.textContent=o+" "+s;const C=document.createElement("P");C.classList.add("card__info"),C.textContent=i;const _=document.createElement("P");_.classList.add("card__info--span"),_.textContent="1"===d?n.confirmed[t]:n["not-confirmed"][t];const x=document.createElement("P");x.classList.add("card__info--span"),x.textContent="1"===c?n["profile-complete"][t]:n["profile-incomplete"][t];const E=document.createElement("A");E.classList.add("btn-view"),E.textContent=n["see-more"][t],E.href="/filmtono/users/current?id="+a;const L=document.createElement("I");L.classList.add("fa-solid","fa-eye"),E.appendChild(L);const y=document.createElement("BUTTON");y.classList.add("btn-delete"),y.value=a,y.dataset.role="filmtono",y.dataset.item="users",y.onclick=eliminarItem;const g=document.createElement("I");g.classList.add("fa-solid","fa-trash-can","no-click"),y.appendChild(g),y.onclick=eliminarItem;const U=document.createElement("DIV");U.classList.add("card__acciones"),U.appendChild(y);const w=document.createElement("DIV");w.classList.add("card"),w.appendChild(u),p&&w.appendChild(f),w.appendChild(h),w.appendChild(C),w.appendChild(_),null!=l&&w.appendChild(x),w.appendChild(f),w.appendChild(E),w.appendChild(U),gridUsuarios.appendChild(w)}),filtrarUsuarios()}function filtrarUsuarios(){document.querySelector("#usuario-search").addEventListener("input",e=>{const t=normalizeText(e.target.value);document.querySelectorAll(".card").forEach(e=>{-1!==normalizeText(e.textContent).indexOf(t)?(e.style.display="flex",e.style.marginRight="2rem",gridUsuarios.style.columnGap="0"):e.style.display="none"})})}
//# sourceMappingURL=users.js.map
