import{keywordsInput,gridKeywords}from"./selectores.js";import{eliminarItem}from"../base/funciones.js";import{readLang,readJSON}from"../base/funciones.js";export async function consultaKeywords(){try{const e=new URLSearchParams(window.location.search),t=e.get("id"),o=e.get("category"),a=window.location.origin+"/api/filmtono/keywords?id="+t+"&category="+o,d=await fetch(a);mostrarKeywords(await d.json())}catch(e){console.log(e)}}export async function mostrarKeywords(e){const t=await readLang();await readJSON();(e=e.map(e=>({id:e.id,keyword_en:e.keyword_en.toLowerCase(),keyword_es:e.keyword_es.toLowerCase()}))).sort((e,o)=>"es"===t?e.keyword_es<o.keyword_es?-1:e.keyword_es>o.keyword_es?1:0:e.keyword_en<o.keyword_en?-1:e.keyword_en>o.keyword_en?1:0),e.forEach(e=>{const{id:o,keyword_en:a,keyword_es:d,id_categoria:n}=e,s=document.createElement("DIV");s.classList.add("cards__div");const r=document.createElement("H3");r.classList.add("card__info--title"),r.textContent="es"==t?d:a;const c=new URLSearchParams(window.location.search).get("category"),i=document.createElement("A");i.classList.add("btn-update"),i.href="/filmtono/categories/keywords/edit?id="+o+"&category="+c;const l=document.createElement("I");l.classList.add("fa-solid","fa-pencil","no-click"),i.appendChild(l);const w=document.createElement("BUTTON");w.classList.add("btn-delete"),w.value=o,w.dataset.type=c,w.dataset.role="filmtono",w.dataset.item="keywords",w.onclick=eliminarItem;const y=document.createElement("I");y.classList.add("fa-solid","fa-trash-can","no-click"),w.appendChild(y),w.onclick=eliminarItem;const m=document.createElement("DIV");m.classList.add("card__acciones"),m.appendChild(i),m.appendChild(w);const p=document.createElement("DIV");p.classList.add("card"),s.appendChild(r),s.appendChild(m),p.appendChild(s),gridKeywords.appendChild(p)}),filtrakeywords()}function filtrakeywords(){keywordsInput.addEventListener("input",e=>{const t=e.target.value.toLowerCase();document.querySelectorAll(".card").forEach(e=>{-1!==e.textContent.toLowerCase().indexOf(t)?(e.style.display="flex",e.style.marginRight="2rem",gridKeywords.style.columnGap="0"):e.style.display="none"})})}
//# sourceMappingURL=keywords.js.map
