import{contratosContainer,contratosSearch}from"./selectores.js";import{readLang,readJSON,eliminarItem}from"../base/funciones.js";export async function consultaContratos(){try{const t=await fetch(window.location.origin+"/api/filmtono/contracts");mostrarContratos(await t.json())}catch(t){console.log(t)}}async function mostrarContratos(t){const e=await readLang(),a=await readJSON();t.forEach(t=>{const n=t.nombre_doc.split("-")[2],{id:c,nombre:s,apellido:d,empresa:o,fecha:r}=t,i=document.createElement("a");i.classList.add("cards__link"),i.href="/filmtono/contracts/current?id="+c+"&type="+n;const l=document.createElement("div");l.classList.add("cards__card");const m=document.createElement("div");m.classList.add("cards__info");const p=document.createElement("div");p.classList.add("cards__info--div");const _=document.createElement("p");_.textContent=a["contracts_user-name"][e]+":",_.classList.add("cards__text","cards__text--span");const C=document.createElement("p");C.textContent=`${s} ${d}`,C.classList.add("cards__text"),p.appendChild(_),p.appendChild(C);const u=document.createElement("div");u.classList.add("cards__info--div");const h=document.createElement("p");h.textContent=a.contracts_empresa[e]+":",h.classList.add("cards__text","cards__text--span");const f=document.createElement("p");f.textContent=o,f.classList.add("cards__text"),u.appendChild(h),u.appendChild(f);const x=document.createElement("div");x.classList.add("cards__info--div");const L=document.createElement("p");L.textContent=a.contracts_type[e]+":",L.classList.add("cards__text","cards__text--span");const E=document.createElement("p");E.textContent="music"===n?a["contracts_type-music"][e]:a["contracts_type-artistic"][e],E.classList.add("cards__text"),x.appendChild(L),x.appendChild(E);const y=document.createElement("div");y.classList.add("cards__info--div");const v=document.createElement("p");v.textContent=a.contracts_fecha[e]+":",v.classList.add("cards__text","cards__text--span");const w=document.createElement("p"),g=new Date(r).toLocaleDateString(e,{year:"numeric",month:"short",day:"numeric"});w.textContent=g,w.classList.add("cards__text"),y.appendChild(v),y.appendChild(w);const S=document.createElement("div");S.classList.add("cards__actions");const b=document.createElement("button");b.classList.add("btn-delete"),b.id="eliminar",b.value=c,b.dataset.type=n,b.dataset.item="contracts",b.dataset.role="filmtono",b.onclick=eliminarItem;const j=document.createElement("i");j.classList.add("fa-solid","fa-trash-can","no-click"),b.appendChild(j),S.appendChild(b),m.appendChild(p),m.appendChild(u),m.appendChild(x),m.appendChild(y),l.appendChild(m),l.appendChild(S),i.appendChild(l),contratosContainer.appendChild(i)}),filtrarContratos()}function filtrarContratos(){contratosSearch.addEventListener("input",t=>{const e=t.target.value.toLowerCase();document.querySelectorAll(".cards__card").forEach(t=>{-1!==t.textContent.toLowerCase().indexOf(e)?(t.style.display="flex",t.style.marginRight="2rem",contratosContainer.style.columnGap="0"):t.style.display="none"})})}
//# sourceMappingURL=contratos.js.map
