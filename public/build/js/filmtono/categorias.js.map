{"version":3,"sources":["filmtono/categorias.js"],"names":["categoriasInput","gridCategorias","readLang","readJSON","eliminarItem","normalizeText","async","consultaCategorias","resultado","fetch","window","location","origin","mostrarCategorias","json","error","console","log","datos","lang","forEach","categoria","id","categoria_en","categoria_es","categoriaLink","document","createElement","classList","add","href","categoriaTitle","textContent","btnEditar","iconoLapiz","appendChild","btnEliminar","value","dataset","role","item","onclick","iconoBasura","contenedorBotones","card","filtraCategorias","addEventListener","e","texto","target","querySelectorAll","indexOf","style","display","marginRight","columnGap"],"mappings":"OAASA,gBAAiBC,mBAAsB,yBACvCC,SAAUC,SAAUC,aAAcC,kBAAqB,8BAEzDC,eAAeC,qBAClB,IACI,MAAMC,QAAkBC,MAAMC,OAAOC,SAASC,OAAO,4BAErDC,wBADoBL,EAAUM,QAGjC,MAAMC,GACHC,QAAQC,IAAIF,WAGbT,eAAeO,kBAAkBK,GAChC,MAAMC,QAAajB,iBACEC,WACrBe,EAAME,QAAQC,IACN,MAAMC,GAACA,EAAEC,aAAEA,EAAYC,aAAEA,GAAgBH,EAGnCI,EAAgBC,SAASC,cAAc,KAC7CF,EAAcG,UAAUC,IAAI,eACE,WAA3BR,EAAUE,aACTE,EAAcK,KAAO,mBAErBL,EAAcK,KAAO,oCAAoCR,EAAG,aAAaC,EAI7E,MAAMQ,EAAiBL,SAASC,cAAc,MAC9CI,EAAeH,UAAUC,IAAI,qBAErBE,EAAeC,YADZ,MAARb,EACkCK,EAEAD,EAGrC,MAAMU,EAAYP,SAASC,cAAc,KACzCM,EAAUL,UAAUC,IAAI,cACxBI,EAAUH,KAAO,gCAAgCR,EAIjD,MAAMY,EAAaR,SAASC,cAAc,KAC1CO,EAAWN,UAAUC,IAAI,WAAY,YAAa,YAGlDI,EAAUE,YAAYD,GAGtB,MAAME,EAAcV,SAASC,cAAc,UAC3CS,EAAYR,UAAUC,IAAI,cAC1BO,EAAYC,MAAQf,EACpBc,EAAYE,QAAQC,KAAO,WAC3BH,EAAYE,QAAQE,KAAO,aAC3BJ,EAAYK,QAAUrC,aAGtB,MAAMsC,EAAchB,SAASC,cAAc,KAC3Ce,EAAYd,UAAUC,IAAI,WAAY,eAAgB,YAGtDO,EAAYD,YAAYO,GACxBN,EAAYK,QAAUrC,aAMtB,MAAMuC,EAAoBjB,SAASC,cAAc,OACjDgB,EAAkBf,UAAUC,IAAI,kBAGhCc,EAAkBR,YAAYF,GACA,WAA3BZ,EAAUE,cACLoB,EAAkBR,YAAYC,GAKtC,MAAMQ,EAAOlB,SAASC,cAAc,OACpCiB,EAAKhB,UAAUC,IAAI,QAGnBJ,EAAcU,YAAYJ,GAC1BN,EAAcU,YAAYQ,GAE1BC,EAAKT,YAAYV,GAEjBxB,eAAekC,YAAYS,KAEnCC,mBAGR,SAASA,mBACD7C,gBAAgB8C,iBAAiB,QAASC,IAClC,MAAMC,EAAQ3C,cAAc0C,EAAEE,OAAOZ,OACvBX,SAASwB,iBAAiB,SAElC9B,QAAQwB,KAEgC,IADfvC,cAAcuC,EAAKZ,aACxBmB,QAAQH,IAClBJ,EAAKQ,MAAMC,QAAU,OACrBT,EAAKQ,MAAME,YAAc,OACzBrD,eAAemD,MAAMG,UAAY,KAEjCX,EAAKQ,MAAMC,QAAU","file":"categorias.js","sourcesContent":["import { categoriasInput, gridCategorias } from './selectores.js';\r\nimport { readLang, readJSON, eliminarItem, normalizeText } from '../base/funciones.js';\r\n\r\nexport async function consultaCategorias(){\r\n    try{\r\n        const resultado = await fetch(window.location.origin+'/api/filmtono/categories');\r\n        const datos = await resultado.json();\r\n        mostrarCategorias(datos);\r\n\r\n    }catch(error){\r\n        console.log(error);\r\n    }\r\n}\r\nexport async function mostrarCategorias(datos){\r\n        const lang = await readLang();\r\n        const alerts = await readJSON();\r\n        datos.forEach(categoria => {\r\n                const {id, categoria_en, categoria_es} = categoria;\r\n\r\n                //generar el link para la categoria\r\n                const categoriaLink = document.createElement('A');\r\n                categoriaLink.classList.add('cards__link');\r\n                if(categoria.categoria_en === 'genres'){\r\n                    categoriaLink.href = '/filmtono/genres';\r\n                } else{\r\n                    categoriaLink.href = '/filmtono/categories/keywords?id='+id+'&category='+categoria_en;\r\n                }\r\n\r\n                //generar la etiqueta para el tipo de usuario\r\n                const categoriaTitle = document.createElement('H3');\r\n                categoriaTitle.classList.add('card__info--title');\r\n                if(lang == 'es'){\r\n                        categoriaTitle.textContent = categoria_es;\r\n                }else{\r\n                        categoriaTitle.textContent = categoria_en;\r\n                }\r\n\r\n                const btnEditar = document.createElement('A');\r\n                btnEditar.classList.add('btn-update');\r\n                btnEditar.href = '/filmtono/categories/edit?id='+id;\r\n                \r\n\r\n                //generar ícono de lápiz para el botón de editar\r\n                const iconoLapiz = document.createElement('I');\r\n                iconoLapiz.classList.add('fa-solid', 'fa-pencil', 'no-click');\r\n\r\n                //Agregar el ícono al botón\r\n                btnEditar.appendChild(iconoLapiz);\r\n\r\n                //generar el botón para eliminar el usuario\r\n                const btnEliminar = document.createElement('BUTTON');\r\n                btnEliminar.classList.add('btn-delete');\r\n                btnEliminar.value = id;\r\n                btnEliminar.dataset.role = 'filmtono';\r\n                btnEliminar.dataset.item = 'categories';\r\n                btnEliminar.onclick = eliminarItem;\r\n\r\n                //generar ícono de basura para el botón de eliminar\r\n                const iconoBasura = document.createElement('I');\r\n                iconoBasura.classList.add('fa-solid', 'fa-trash-can', 'no-click');\r\n\r\n                //Agregar el ícono al botón\r\n                btnEliminar.appendChild(iconoBasura);\r\n                btnEliminar.onclick = eliminarItem;\r\n                \r\n                \r\n                \r\n\r\n                //generar el contenedor de los botones\r\n                const contenedorBotones = document.createElement('DIV');\r\n                contenedorBotones.classList.add('card__acciones');\r\n\r\n                //agregar los botones al contenedor\r\n                contenedorBotones.appendChild(btnEditar);\r\n                if(categoria.categoria_en !== 'genres'){\r\n                        contenedorBotones.appendChild(btnEliminar);\r\n                }\r\n                \r\n\r\n                //Generar el contenedor de la información del usuario\r\n                const card = document.createElement('DIV');\r\n                card.classList.add('card');\r\n\r\n                //agregar la información al contenedor\r\n                categoriaLink.appendChild(categoriaTitle);\r\n                categoriaLink.appendChild(contenedorBotones);\r\n                //agregar el link contenedor a la tarjeta\r\n                card.appendChild(categoriaLink);\r\n                //agregar el contenedor de la información al grid\r\n                gridCategorias.appendChild(card);\r\n        });\r\n        filtraCategorias();\r\n}\r\n\r\nfunction filtraCategorias(){\r\n        categoriasInput.addEventListener('input', e => {\r\n                const texto = normalizeText(e.target.value);\r\n                const cards = document.querySelectorAll('.card');\r\n\r\n                cards.forEach(card => {\r\n                        const categoriaTitle = normalizeText(card.textContent);\r\n                        if(categoriaTitle.indexOf(texto) !== -1){\r\n                                card.style.display = 'flex';\r\n                                card.style.marginRight = '2rem';\r\n                                gridCategorias.style.columnGap = '0';\r\n                        }else{\r\n                                card.style.display = 'none';\r\n                        }\r\n                });\r\n        }); \r\n}"]}